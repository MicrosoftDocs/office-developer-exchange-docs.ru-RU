---
title: Журналы транзакций и файлы контрольных точек для резервного копирования и восстановления в Exchange
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 80e04b9f-87c7-4acf-89b1-aa66ffaf7e53
description: Сведения о журналах транзакций и файлах контрольных точек, а также о том, как они используются для резервного копирования и восстановления данных Exchange 2013.
ms.openlocfilehash: 5b01fc6924f82e76943795df877ae84b1fde087b
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/31/2020
ms.locfileid: "44456390"
---
# <a name="transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange"></a>Журналы транзакций и файлы контрольных точек для резервного копирования и восстановления в Exchange

Сведения о журналах транзакций и файлах контрольных точек, а также о том, как они используются для резервного копирования и восстановления данных Exchange 2013.
  
**Применимо к:** Exchange Server 2013 
  
В этой статье описывается, как Exchange Server 2013 использует журналы транзакций и файлы контрольных точек для предотвращения потери данных. При разработке приложений для резервного копирования и восстановления, использующих службу теневого копирования томов (VSS), в версиях Windows Server, начиная с Windows Server 2008, важно знать об этих сведениях.
  
## <a name="transaction-logs-in-exchange-2013"></a>Журналы транзакций в Exchange 2013

Exchange 2013 поддерживает единый набор файлов журналов транзакций для каждой базы данных. Транзакция определяется как любая операция, которая изменяет состояние или содержимое базы данных. Файлы журнала транзакций для отдельной базы данных записывают все транзакции, выполняемые в базе данных. Записи транзакций записываются в журналы транзакций до их внесения в саму базу данных, чтобы гарантировать, что все зафиксированные транзакции могут быть восстановлены в случае сбоя базы данных. Журналы транзакций базы данных Exchange 2013 хранятся на диске до того, как транзакции будут зафиксированы в файле базы данных. 
  
Запись транзакций перед обновлением базы данных называется ведением журнала с упреждающей записью. Чтобы убедиться, что база данных правильно возвращена в соответствующее состояние, Exchange 2013 записывает данные в файлы базы данных с помощью операций записи и контрольных точек на основе страниц. В ходе обычных операций хранилище Exchange сначала записывает изменения базы данных в журналы транзакций, а затем вносит изменения в копию базы данных, находящиеся в памяти. В журналах транзакций записываются начало и конец каждой транзакции. Это гарантирует, что в базе данных будет доступно достаточно информации для последующего отмены или отката операций в базе данных.
  
При восстановлении после ошибок, когда файл базы данных на диске поврежден, но журналы транзакций не повреждены, приложение восстановления должно сначала восстановить известную работоспособную копию файла базы данных.
  
Хранилище Exchange воспроизводит транзакции из архивных журналов транзакций, а затем воспроизводит все оставшиеся транзакции из файлов журнала транзакций на диске. Обратите внимание, что иногда транзакции могут быть потеряны в случае сбоя системы между моментом записи транзакций в журналы транзакций и при их фактическом написании в файлах базы данных. 
  
Периодически хранилище Exchange проверяет изображение базы данных в памяти, а затем определяет, какие страницы изменились. Хранилище Exchange объединяет ожидающие изменения, а затем записывает эти страницы в файл базы данных на диске.
  
## <a name="checkpoint-files-in-exchange-2013"></a>Файлы контрольных точек в Exchange 2013

Файл контрольной точки записывает записанные транзакции в файлы базы данных на диске. Контрольная точка является расширенной, когда все страницы базы данных, которые были изменены записями в журналах транзакций, успешно записаны на диск. Так как файл контрольной точки записывает, какие транзакции уже находятся в образе базы данных на диске, хранилище Exchange должно выполнять только транзакции, произошедшие после создания контрольной точки. В зависимости от периода времени между резервными копиями это может значительно уменьшить количество транзакций, которые необходимо преобразовать в базу данных в случае сбоя системы.
  
## <a name="see-also"></a>См. также

- [Основные понятия резервного копирования и восстановления для Exchange 2013](backup-and-restore-concepts-for-exchange-2013.md)
- [Типы операций резервного копирования для Exchange 2013](types-of-backup-operations-for-exchange-2013.md)
- [Восстановление баз данных Exchange 2013](restoring-exchange-2013-databases.md)
    

