---
title: Обновление сведений о конфигурации с помощью службы автообнаружения
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: c2f3c6a5-e8ea-4375-b41a-686a6f238d33
description: Узнайте, как и когда до обновления сведений о конфигурации для подключения к Exchange с помощью службы автообнаружения.
ms.openlocfilehash: ef3b61781cbafa6e7b873336a050c0b8c33a28ec
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/11/2018
ms.locfileid: "19761128"
---
# <a name="refresh-configuration-information-by-using-autodiscover"></a>Обновление сведений о конфигурации с помощью службы автообнаружения

Узнайте, как и когда до обновления сведений о конфигурации для подключения к Exchange с помощью службы автообнаружения.
  
При запуске приложения веб-служб Exchange в первый раз, автообнаружения предоставляет отличный способ сбора информацию, необходимую для подключения к почтовому ящику Exchange пользователя. Но автообнаружения не только для первоначального применения. Использование функции автоматического обнаружения на регулярной основе обеспечивают безопасность приложения подключена, включив его реагировать на изменения в развертывании Exchange.
  
## <a name="cache-autodiscover-endpoint-and-ews-settings"></a>Кэширование конечных точек службы автообнаружения и параметров веб-служб Exchange
<a name="bk_CacheSettings"> </a>

Хотя мы рекомендуется использовать службы автообнаружения регулярно, как регулярно используйте требует некоторые процедуры. В идеальном варианте можно сбалансировать быстро отвечать на изменения в среде с создания слишком много ненужных сетевого трафика. Когда приложение получает успешного ответа службы автообнаружения в первый раз, следует сохранить со следующими сведениями, чтобы повторить процесс автоматического обнаружения, каждый раз при отправке запроса EWS не нужно.
  
**В таблице 1. Запрашивает сведения о кэше для службы автообнаружения**

|**Установка для кэша**|**Допустимый для...**|**Сведения**|
|:-----|:-----|:-----|
|Конечная точка службы автообнаружения  <br/> |Поскольку это работает  <br/> |При сохранении конечная точка службы автообнаружения, возвращенный успешного ответа, повторите процесс [создания списка конечных точек службы автообнаружения](how-to-generate-a-list-of-autodiscover-endpoints.md) и ознакомления с их до получения успешного ответа не нужно.<br/><br/> **Примечание**: управляемый API EWS не поддерживает кэширование конечных точек службы автообнаружения.           |
|URL-адрес веб-служб Exchange и другие параметры извлекается из ответа службы автообнаружения  <br/> |24 часа  <br/> |Путем сохранения в URL-адрес веб-служб Exchange и другие параметры, связанные со, необходимо [Отправить запрос нового автообнаружения](how-to-get-user-settings-from-exchange-by-using-autodiscover.md) для каждого запроса веб-служб Exchange или если приложение перезапускается. Тем не менее, даже в том случае, если URL-адрес веб-служб Exchange работает для пользователей, сервер может быть доступно то есть более оптимальным.<br/><br/> Например в почтовый ящик был перемещен на новый сервер почтовых ящиков, приведшего к новой основной конечной точки веб-служб Exchange. Рекомендуется обновить настройки пользователя, отправив запрос нового автообнаружения после выполнения 24 часов с момента последнего запроса службы автообнаружения. В этом времени можно настроить в соответствии с требованиями вашего приложения.  <br/> |
   
## <a name="refresh-cached-configuration-information"></a>Обновление сведений о конфигурации кэширования
<a name="bk_RefreshConfig"> </a>

Теперь, когда у вас есть сведения кэширования, давайте рассмотрим, как можно сохранить этот кэш актуальными. Мы рекомендуем обновите кэшированные сведения при:
  
- Сведения о срока.
    
- [Ошибки, связанные с подключения](#bk_ConnectionErrors) происходит. 
    
Чтобы обновить кэшированные сведения, отправки запроса службы автообнаружения для кэширования конечной точки службы автообнаружения и выполните следующие действия:
  
- Если запрос пройдет успешно, сравнение конечной точки веб-служб Exchange в ответе с кэшированной конечной точки веб-служб Exchange и выполните следующее:
    
  - Если они не совпадают, используйте новую конечную точку веб-служб Exchange. Если вы обновление восстановиться после ошибки, повторите неудачных запросов с новой конечной точкой.
    
  - Если это так же, продолжить использование исходной конечной точки веб-служб Exchange. Если вы обновление восстановиться после ошибки, обработайте ошибки соответствующим образом.
    
- Если не удается выполнить запрос, запуск [процесса автообнаружения](autodiscover-for-exchange.md) с самого начала. После получения успешного ответа, замените кэшированные конечной точки службы автообнаружения конечная точка службы автообнаружения, успешно и продолжить использовать новую конечную точку веб-служб Exchange. Если вы не для получения успешного ответа, продолжить использование исходной конечной точки службы автообнаружения и конечной точки веб-служб Exchange. Если вы обновление восстановиться после ошибки, обработайте ошибки соответствующим образом. 
    
На следующем рисунке представлены визуальным представлением этого процесса.
  
**На рисунке 1. Процесс обновления сведений о конфигурации с помощью службы автообнаружения**

![Схема обновления данных конфигурации при автообнаружении.](media/Ex15_Autodiscover_Refresh_Flowchart.png)
  
### <a name="connection-related-errors"></a>Ошибки, связанные с подключения
<a name="bk_ConnectionErrors"> </a>

Обновление сведений о конфигурации кэширования могут помочь в некоторые ошибки, но не все. 
  
**В таблице 2. Ошибки, адресуемый обновления вашей кэша**

|**Error**|**Управляемый API EWS реализации**|**Примечания**|
|:-----|:-----|:-----|
|Ошибки при DNS или в сети<br/><br/> Пример: Не удалось найти имя узла.  <br/> |[ServiceRemoteException](https://msdn.microsoft.com/library/Microsoft.Exchange.WebServices.Data.ServiceRemoteException.aspx) <br/> |На ошибки, которое указывает, что сервер не найден или не удалось подключиться к может быть решена ознакомления с службы автообнаружения. <br/><br/> Кэшированные конечной точки веб-служб Exchange могут стать недействительными и автоматического обнаружения могут быть меньше, чтобы они указывали на новый сервер.  <br/> |
|Состояние ошибки HTTP<br/><br/> Пример: 503 Служба недоступна  <br/> |[ServiceRemoteException](https://msdn.microsoft.com/library/Microsoft.Exchange.WebServices.Data.ServiceRemoteException.aspx) <br/> |Состояние ошибки HTTP может произойти по разным причинам.<br/><br/> Тем не менее рекомендуется попробовать автообнаружения для получения новой конечной точки веб-служб Exchange для пользователя.  <br/> |
|Коды ошибок веб-служб Exchange <br/><br/> Пример: ErrorConnectionFailed <br/> |[ResponseCodeType](https://msdn.microsoft.com/library/Microsoft.Exchange.WebServices.Data.ResponseCodeType.aspx) <br/> | Большинство кодов ошибок веб-служб Exchange не гарантирует обновление сведений о конфигурации.<br/><br/> Тем не менее следующие специально указывают, что необходимо обновить сведения о конфигурации:<br/>- **ErrorConnectionFailed** <br/>- **ErrorMailboxMoveInProgress** <br/> |
   
## <a name="see-also"></a>См. также

- [Автообнаружение для Exchange](autodiscover-for-exchange.md)  
- [Создать список конечных точек службы автообнаружения](how-to-generate-a-list-of-autodiscover-endpoints.md)   
- [Получить параметры пользователя из Exchange с помощью службы автообнаружения](how-to-get-user-settings-from-exchange-by-using-autodiscover.md)
    

