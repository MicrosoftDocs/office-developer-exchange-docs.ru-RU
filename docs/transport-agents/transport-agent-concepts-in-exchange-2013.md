---
title: Основные понятия, связанные с агентами транспорта в Exchange 2013
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 0c700af8-2792-4d3f-8571-8860e0550d8e
description: Сведения о том, как архитектура агента транспорта и роль сервера в Exchange 2013 влияет на разработку агента транспорта, а также классы, которые можно использовать для разработки агентов транспорта.
ms.openlocfilehash: b9552ea4398ac8135a11b48eb7e7bdf5ec81985e
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2020
ms.locfileid: "44527560"
---
# <a name="transport-agent-concepts-in-exchange-2013"></a><span data-ttu-id="28a4e-103">Основные понятия, связанные с агентами транспорта в Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="28a4e-103">Transport agent concepts in Exchange 2013</span></span>

<span data-ttu-id="28a4e-104">Сведения о том, как архитектура агента транспорта и роль сервера в Exchange 2013 влияет на разработку агента транспорта, а также классы, которые можно использовать для разработки агентов транспорта.</span><span class="sxs-lookup"><span data-stu-id="28a4e-104">Find information about how the transport agent pipeline and server role architecture in Exchange 2013 affect transport agent development, and the classes that you can use to develop transport agents.</span></span> 
  
<span data-ttu-id="28a4e-105">**Применимо к:** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="28a4e-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="28a4e-106">С помощью библиотеки классов, предоставляемой в Exchange Server 2013, можно реализовать агенты транспорта, которые регистрируют события и принимают действия к сообщениям, проходящих через транспортный конвейер.</span><span class="sxs-lookup"><span data-stu-id="28a4e-106">You can use the class library provided in Exchange Server 2013 to implement transport agents that register for events and take actions on messages as they pass through the transport pipeline.</span></span> <span data-ttu-id="28a4e-107">Вы также можете использовать агенты транспорта для изменения сообщений и преобразования контента.</span><span class="sxs-lookup"><span data-stu-id="28a4e-107">You can also use transport agents to modify messages and convert content.</span></span> 
  
<span data-ttu-id="28a4e-108">В этой статье представлены сведения об агентах транспорта и об архитектуре конвейера транспорта.</span><span class="sxs-lookup"><span data-stu-id="28a4e-108">This article provides information about transport agents and the transport pipeline architecture.</span></span> <span data-ttu-id="28a4e-109">Важно понимать архитектуру транспортного конвейера, чтобы можно было изменить поведение транспорта в соответствии с потребностями Организации.</span><span class="sxs-lookup"><span data-stu-id="28a4e-109">It is important to understand the architecture of the transport pipeline so that you can modify transport behavior to meet your organization's needs.</span></span> <span data-ttu-id="28a4e-110">В этой статье также приводятся сведения об изменениях в архитектуре Exchange 2013, влияющих на агенты транспорта и классы, которые можно использовать для разработки агентов транспорта.</span><span class="sxs-lookup"><span data-stu-id="28a4e-110">This article also provides information about changes in the Exchange 2013 architecture that affect transport agents and the classes that you can use to develop transport agents.</span></span> 
  
## <a name="transport-agents-in-the-transport-pipeline"></a><span data-ttu-id="28a4e-111">Агенты транспорта в транспортном конвейере</span><span class="sxs-lookup"><span data-stu-id="28a4e-111">Transport agents in the transport pipeline</span></span>
<span data-ttu-id="28a4e-112"><a name="Pipeline"> </a></span><span class="sxs-lookup"><span data-stu-id="28a4e-112"><a name="Pipeline"> </a></span></span>

<span data-ttu-id="28a4e-113">Агенты транспорта являются производными от одного из следующих трех классов:</span><span class="sxs-lookup"><span data-stu-id="28a4e-113">Transport agents are derived from one of the following three classes:</span></span>
  
- [<span data-ttu-id="28a4e-114">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="28a4e-114">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx)
- [<span data-ttu-id="28a4e-115">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="28a4e-115">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx)
- [<span data-ttu-id="28a4e-116">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="28a4e-116">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx)
    
<span data-ttu-id="28a4e-117">Транспортный конвейер относится к потоку данных сообщений в пределах границ организации Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="28a4e-117">The transport pipeline refers to the flow of message data within the boundaries of an Exchange 2013 organization.</span></span> <span data-ttu-id="28a4e-118">Конвейер состоит из служб, перечисленных в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="28a4e-118">The pipeline consists of the services listed in the following table.</span></span>
  
<span data-ttu-id="28a4e-119">**Таблица 1. Службы транспортного конвейера**</span><span class="sxs-lookup"><span data-stu-id="28a4e-119">**Table 1. Transport pipeline services**</span></span>

|<span data-ttu-id="28a4e-120">**Служба**</span><span class="sxs-lookup"><span data-stu-id="28a4e-120">**Service**</span></span>|<span data-ttu-id="28a4e-121">**Описание**</span><span class="sxs-lookup"><span data-stu-id="28a4e-121">**Description**</span></span>|<span data-ttu-id="28a4e-122">**Поддерживаемые классы**</span><span class="sxs-lookup"><span data-stu-id="28a4e-122">**Classes supported**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="28a4e-123">Транспортный сервер переднего плана</span><span class="sxs-lookup"><span data-stu-id="28a4e-123">Front End Transport</span></span>  <br/> |<span data-ttu-id="28a4e-124">Выполняется на всех [серверах клиентского доступа](https://technet.microsoft.com/library/dd298114%28v=exchg.150%29.aspx) и выступает в роли прокси-сервера без состояний для всего входящего и исходящего внешнего SMTP-трафика для организации Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="28a4e-124">Runs on all [Client Access servers](https://technet.microsoft.com/library/dd298114%28v=exchg.150%29.aspx) and acts as a stateless proxy for all inbound and outbound external SMTP traffic for the Exchange 2013 organization.</span></span> <span data-ttu-id="28a4e-125">Внешняя служба транспорта не проверяет содержимое сообщения и не ставит в очередь локальное сообщение.</span><span class="sxs-lookup"><span data-stu-id="28a4e-125">The Front End Transport service doesn't inspect message content or queue any messages locally.</span></span> <span data-ttu-id="28a4e-126">Он связывается со службой транспорта на [сервере почтовых ящиков](https://technet.microsoft.com/library/jj150491%28v=exchg.150%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="28a4e-126">It communicates with the Transport service on a [Mailbox server](https://technet.microsoft.com/library/jj150491%28v=exchg.150%29.aspx).</span></span>  <br/> |[<span data-ttu-id="28a4e-127">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="28a4e-127">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> |
|<span data-ttu-id="28a4e-128">Transport</span><span class="sxs-lookup"><span data-stu-id="28a4e-128">Transport</span></span>  <br/> |<span data-ttu-id="28a4e-129">Выполняется на всех серверах почтовых ящиков и аналогично роли [транспортного сервера-концентратора](https://technet.microsoft.com/library/bb123494%28v=exchg.141%29.aspx) в Exchange Server 2010.</span><span class="sxs-lookup"><span data-stu-id="28a4e-129">Runs on all Mailbox servers and is similar to the [Hub Transport server](https://technet.microsoft.com/library/bb123494%28v=exchg.141%29.aspx) role in Exchange Server 2010.</span></span> <span data-ttu-id="28a4e-130">Служба транспорта маршрутизирует сообщения между собой, а также транспортным сервером и интерфейсным транспортным службам.</span><span class="sxs-lookup"><span data-stu-id="28a4e-130">The Transport service routes messages between itself and the Mailbox Transport and Front End Transport services.</span></span> <span data-ttu-id="28a4e-131">Эта служба не взаимодействует напрямую с базами данных почтовых ящиков.</span><span class="sxs-lookup"><span data-stu-id="28a4e-131">This service does not communicate directly with mailbox databases.</span></span>  <br/> |[<span data-ttu-id="28a4e-132">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="28a4e-132">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> [<span data-ttu-id="28a4e-133">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="28a4e-133">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) <br/> [<span data-ttu-id="28a4e-134">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="28a4e-134">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) <br/> |
|<span data-ttu-id="28a4e-135">Транспортная служба почтовых ящиков.</span><span class="sxs-lookup"><span data-stu-id="28a4e-135">Mailbox Transport</span></span>  <br/> |<span data-ttu-id="28a4e-136">Выполняется на всех серверах почтовых ящиков и состоит из двух отдельных служб: отправка транспорта почтового ящика и доставка транспорта почтовых ящиков.</span><span class="sxs-lookup"><span data-stu-id="28a4e-136">Runs on all Mailbox servers and consists of two separate services: Mailbox Transport Submission and Mailbox Transport Delivery.</span></span> <span data-ttu-id="28a4e-137">Доставка транспорта почтовых ящиков получает сообщения SMTP от службы транспорта и подключается к базе данных почтовых ящиков с помощью удаленного вызова процедур (RPC) Exchange для доставки сообщения.</span><span class="sxs-lookup"><span data-stu-id="28a4e-137">Mailbox Transport Delivery receives SMTP messages from the Transport service, and connects to the mailbox database by using an Exchange remote procedure call (RPC) to deliver the message.</span></span> <span data-ttu-id="28a4e-138">Отправка транспорта почтовых ящиков подключается к базе данных почтовых ящиков с помощью RPC для получения сообщений и отправки сообщений по протоколу SMTP в службу транспорта.</span><span class="sxs-lookup"><span data-stu-id="28a4e-138">Mailbox Transport Submission connects to the mailbox database using RPC to retrieve messages, and submits the messages via SMTP to the Transport service.</span></span>  <br/> |<span data-ttu-id="28a4e-139">Отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="28a4e-139">None.</span></span>  <br/> |
   
### <a name="transport-events"></a><span data-ttu-id="28a4e-140">Транспортные события</span><span class="sxs-lookup"><span data-stu-id="28a4e-140">Transport events</span></span>
<span data-ttu-id="28a4e-141"><a name="Events"> </a></span><span class="sxs-lookup"><span data-stu-id="28a4e-141"><a name="Events"> </a></span></span>

<span data-ttu-id="28a4e-142">Вы реализуете агенты транспорта, сначала регистрируя их для события, а затем выполнив действие при срабатывании этого события.</span><span class="sxs-lookup"><span data-stu-id="28a4e-142">You implement transport agents by first registering for an event, and then taking an action when that event fires.</span></span> <span data-ttu-id="28a4e-143">Каждый из трех типов агентов может регистрироваться для разных наборов событий.</span><span class="sxs-lookup"><span data-stu-id="28a4e-143">Each of the three agent types can register for a different set of events.</span></span>
  
<span data-ttu-id="28a4e-144">На следующем рисунке показано, где в агенте транспорта транспортного конвейера могут регистрироваться события.</span><span class="sxs-lookup"><span data-stu-id="28a4e-144">The following figure shows where in the transport pipeline transport agents can register for events.</span></span>
  
<span data-ttu-id="28a4e-145">**Рис. 1. Транспортные события**</span><span class="sxs-lookup"><span data-stu-id="28a4e-145">**Figure 1. Transport events**</span></span>

![Изображение, показывающее поток сообщений через конвейер транспорта и события, для которых может зарегистрироваться каждый агент, начиная с событий SMTP для агента SmtpReceivedAgent, событий категоризатора для агента RoutingAgent и заканчивая событиями доставки для агента DeliveryAgent.](media/TAConceptsFig1.png)
  
<span data-ttu-id="28a4e-147">Когда сообщение поступает в транспортный конвейер, агент транспорта, производный от класса [SmtpReceiveAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) , может работать с сообщением во время любого события SMTP, зарегистрированного агентом.</span><span class="sxs-lookup"><span data-stu-id="28a4e-147">When a message enters the transport pipeline, a transport agent derived from the [SmtpReceiveAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) class can act on the message during any of the SMTP events that the agent registered for.</span></span> <span data-ttu-id="28a4e-148">Агент, производный от класса [RoutingAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) , может работать с любым из четырех событий классификатора, для которых он зарегистрирован.</span><span class="sxs-lookup"><span data-stu-id="28a4e-148">An agent derived from the [RoutingAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) class can act on any of the four categorizer events that it has registered for.</span></span> <span data-ttu-id="28a4e-149">Агент, производный от класса [DeliveryAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) , может работать с сообщением во время любого события доставки, для которого он зарегистрирован.</span><span class="sxs-lookup"><span data-stu-id="28a4e-149">An agent derived from the [DeliveryAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) class can act on a message during any of the delivery events that it has registered for.</span></span> 
  
## <a name="transport-agents-and-server-roles"></a><span data-ttu-id="28a4e-150">Агенты транспорта и роли сервера</span><span class="sxs-lookup"><span data-stu-id="28a4e-150">Transport agents and server roles</span></span>
<span data-ttu-id="28a4e-151"><a name="ServerRoles"> </a></span><span class="sxs-lookup"><span data-stu-id="28a4e-151"><a name="ServerRoles"> </a></span></span>

<span data-ttu-id="28a4e-152">Изменения архитектуры ролей сервера в Exchange 2013 влияют на агенты транспорта и действия, которые могут выполнять агенты транспорта.</span><span class="sxs-lookup"><span data-stu-id="28a4e-152">Changes to the server role architecture in Exchange 2013 affect transport agents and what your transport agents can do.</span></span> <span data-ttu-id="28a4e-153">Exchange 2013 включает следующие роли сервера:</span><span class="sxs-lookup"><span data-stu-id="28a4e-153">Exchange 2013 includes the following server roles:</span></span>
  
- <span data-ttu-id="28a4e-154">Сервер почтовых ящиков — включает протоколы клиентского доступа, службу транспорта, базы данных почтовых ящиков и компоненты единой системы обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="28a4e-154">Mailbox server — Includes Client Access protocols, the Transport service, mailbox databases, and Unified Messaging components.</span></span> <span data-ttu-id="28a4e-155">Сервер почтовых ящиков взаимодействуют непосредственно с доменными службами Active Directory (AD DS), серверами клиентского доступа и почтовыми клиентами, такими как Outlook.</span><span class="sxs-lookup"><span data-stu-id="28a4e-155">The Mailbox server communicates directly with Active Directory Domain Services (AD DS), Client Access servers, and mail clients such as Outlook.</span></span>
    
- <span data-ttu-id="28a4e-156">Сервер клиентского доступа — обеспечивает проверку подлинности, ограниченное перенаправление, прокси-службы и протоколы клиентского доступа, такие как HTTP, POP, IMAP и SMTP.</span><span class="sxs-lookup"><span data-stu-id="28a4e-156">Client Access server — Provides authentication, limited redirection, proxy services, and client access protocols such as HTTP, POP, IMAP, and SMTP.</span></span>
    
- <span data-ttu-id="28a4e-157">Пограничный транспортный сервер — направляет электронную почту в организацию и из нее.</span><span class="sxs-lookup"><span data-stu-id="28a4e-157">Edge Transport server — Routes email into and out of an organization.</span></span> <span data-ttu-id="28a4e-158">Пограничные транспортные серверы обычно располагаются на периметре топологии Exchange.</span><span class="sxs-lookup"><span data-stu-id="28a4e-158">Edge Transport servers typically sit at the perimeter of an Exchange topology.</span></span>
    
<span data-ttu-id="28a4e-159">Эта консолидированная структура сокращает количество серверов, которые необходимо развернуть в среде Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="28a4e-159">This consolidated structure reduces the number of servers that need to be deployed in an Exchange 2013 environment.</span></span> <span data-ttu-id="28a4e-160">Администраторам больше не нужно развертывать серверы транспортных серверов-концентраторов и клиентского доступа на каждом сайте Active Directory, включающем сервер почтовых ящиков, и больше не нужно обновлять все роли сервера, чтобы воспользоваться преимуществами новых функций.</span><span class="sxs-lookup"><span data-stu-id="28a4e-160">Administrators no longer have to deploy Hub Transport and Client Access servers in every Active Directory site that includes a Mailbox server, and they no longer need to update all server roles in order to take advantage of new functionality.</span></span>
  
<span data-ttu-id="28a4e-161">Эти изменения в архитектуре ролей сервера потенциально могут повлиять на то, где в конвейере может реагировать ваш агент на события.</span><span class="sxs-lookup"><span data-stu-id="28a4e-161">These changes to the server role architecture can potentially affect where in the pipeline your agent can respond to events.</span></span> <span data-ttu-id="28a4e-162">Если вы создали агенты транспорта для более ранних версий Exchange, чем Exchange 2013, ознакомьтесь с изменениями архитектуры, чтобы определить, нужно ли вносить изменения в агенты.</span><span class="sxs-lookup"><span data-stu-id="28a4e-162">If you have created transport agents for versions of Exchange earlier than Exchange 2013, be sure to review the architectural changes to determine whether you need to make any changes to your agents.</span></span>
  
<span data-ttu-id="28a4e-163">На следующем рисунке показано, как изменения архитектуры в Exchange 2013 приводят к упрощенному консолидированному транспортному конвейеру.</span><span class="sxs-lookup"><span data-stu-id="28a4e-163">The following figure shows how the architectural changes in Exchange 2013 result in a streamlined, consolidated transport pipeline.</span></span> <span data-ttu-id="28a4e-164">На этом рисунке серверы клиентского доступа помечены как ЦС.</span><span class="sxs-lookup"><span data-stu-id="28a4e-164">In this figure, Client Access servers are labeled CAS.</span></span> <span data-ttu-id="28a4e-165">Серверы почтовых ящиков помечаются метками MBX.</span><span class="sxs-lookup"><span data-stu-id="28a4e-165">And Mailbox servers are labeled MBX.</span></span>
  
<span data-ttu-id="28a4e-166">**Рис. 2. Архитектура ролей сервера Exchange 2013**</span><span class="sxs-lookup"><span data-stu-id="28a4e-166">**Figure 2. Exchange 2013 server role architecture**</span></span>

![Изображение, показывающее, как трафик клиента через внешний брандмауэр и пограничный транспортный сервер (слева) проходит через балансировщик нагрузки четвертого слоя в консолидированный массив CAS и набор серверов почтовых ящиков в группе доступа к базе данных (справа).](media/Transport_Agent_Concepts_Fig_3.png)
  
<span data-ttu-id="28a4e-168">На следующем рисунке показаны взаимодействия между ролями сервера Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="28a4e-168">The following figure shows the interactions between the Exchange 2013 server roles.</span></span>
  
<span data-ttu-id="28a4e-169">**Рис. 3. Взаимодействия сервера почтовых ящиков и клиентского доступа**</span><span class="sxs-lookup"><span data-stu-id="28a4e-169">**Figure 3. Mailbox and Client Access server interactions**</span></span>

![Изображение, показывающее взаимодействие, начиная со стрелок от трафика клиента, проходящих через балансировщик нагрузки четвертого слоя, для которого на сервере клиентского доступа имеется 4 цели: IIS/HTTP-прокси, POP/IMAP, SMTP и UM. Стрелки указывают на соответствующие цели в хранилище почтовых ящиков.](media/Transport_Agent_Concepts_Fig_4.png)
  
<span data-ttu-id="28a4e-172">Более подробную информацию об изменениях в архитектуре ролей сервера Exchange 2013 можно узнать в статье Exchange [2013 Architecture](https://technet.microsoft.com/library/jj150540%28v=exchg.150%29.aspx#BKMK_Arch) в статье [новые возможности Exchange 2013](https://technet.microsoft.com/library/jj150540%28v=exchg.150%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="28a4e-172">For more information about changes in the Exchange 2013 server role architecture, see [Exchange 2013 architecture](https://technet.microsoft.com/library/jj150540%28v=exchg.150%29.aspx#BKMK_Arch) in [What's New in Exchange 2013](https://technet.microsoft.com/library/jj150540%28v=exchg.150%29.aspx).</span></span> 
  
## <a name="transport-agent-classes"></a><span data-ttu-id="28a4e-173">Классы агентов транспорта</span><span class="sxs-lookup"><span data-stu-id="28a4e-173">Transport agent classes</span></span>
<span data-ttu-id="28a4e-174"><a name="Create"> </a></span><span class="sxs-lookup"><span data-stu-id="28a4e-174"><a name="Create"> </a></span></span>

<span data-ttu-id="28a4e-175">Класс, производный от агента транспорта, определяет события, которые агент может зарегистрировать.</span><span class="sxs-lookup"><span data-stu-id="28a4e-175">The class your transport agent derives from determines the events for which your agent can register.</span></span> <span data-ttu-id="28a4e-176">Ваш агент обычно содержит класс агента, фабрику агентов, один или несколько обработчиков событий, а также код, выполняющий действия, которые должен выполнять агент.</span><span class="sxs-lookup"><span data-stu-id="28a4e-176">Your agent will typically contain an agent class, an agent factory, one or more event handlers, and the code that performs the actions that you want your agent to take.</span></span>
  
<span data-ttu-id="28a4e-177">В следующей таблице перечислены классы, от которых наследуются типы агентов.</span><span class="sxs-lookup"><span data-stu-id="28a4e-177">The following table lists the classes from which to derive for each agent type.</span></span>
  
<span data-ttu-id="28a4e-178">**Таблица 2. Классы агентов**</span><span class="sxs-lookup"><span data-stu-id="28a4e-178">**Table 2. Agent classes**</span></span>

||||
|:-----|:-----|:-----|
|<span data-ttu-id="28a4e-179">Тип агента</span><span class="sxs-lookup"><span data-stu-id="28a4e-179">Agent type</span></span>  <br/> |<span data-ttu-id="28a4e-180">Базовый класс фабрики</span><span class="sxs-lookup"><span data-stu-id="28a4e-180">Factory base class</span></span>  <br/> |<span data-ttu-id="28a4e-181">Базовый класс агента</span><span class="sxs-lookup"><span data-stu-id="28a4e-181">Agent base class</span></span>  <br/> |
|<span data-ttu-id="28a4e-182">Получение SMTP</span><span class="sxs-lookup"><span data-stu-id="28a4e-182">SMTP receive</span></span>  <br/> |[<span data-ttu-id="28a4e-183">смтпрецеивеажентфактори</span><span class="sxs-lookup"><span data-stu-id="28a4e-183">SmtpReceiveAgentFactory</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgentFactory.aspx) <br/> |[<span data-ttu-id="28a4e-184">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="28a4e-184">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> |
|<span data-ttu-id="28a4e-185">Включен</span><span class="sxs-lookup"><span data-stu-id="28a4e-185">Routing</span></span>  <br/> |[<span data-ttu-id="28a4e-186">раутингажентфактори</span><span class="sxs-lookup"><span data-stu-id="28a4e-186">RoutingAgentFactory</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgentFactory.aspx) <br/> |[<span data-ttu-id="28a4e-187">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="28a4e-187">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) <br/> |
|<span data-ttu-id="28a4e-188">Delivery</span><span class="sxs-lookup"><span data-stu-id="28a4e-188">Delivery</span></span>  <br/> |<span data-ttu-id="28a4e-189">[деливеряжентфактори\<Manager\>](https://msdn.microsoft.com/library/dd877550(v=exchg.150).aspx)</span><span class="sxs-lookup"><span data-stu-id="28a4e-189">[DeliveryAgentFactory\<Manager\>](https://msdn.microsoft.com/library/dd877550(v=exchg.150).aspx)</span></span> <br/> |<span data-ttu-id="28a4e-190">[DeliveryAgent](https://msdn.microsoft.com/library/microsoft.exchange.data.transport.delivery.deliveryagent(v=exchg.150).aspx)</span><span class="sxs-lookup"><span data-stu-id="28a4e-190">[DeliveryAgent](https://msdn.microsoft.com/library/microsoft.exchange.data.transport.delivery.deliveryagent(v=exchg.150).aspx)</span></span> <br/> |
   
<span data-ttu-id="28a4e-191">Эти базовые классы агентов и агентов предоставляют свойства и методы, которые можно использовать для доступа к событиям транспорта и сообщениям.</span><span class="sxs-lookup"><span data-stu-id="28a4e-191">These factory and agent base classes provide properties and methods that you can use to access transport events and messages.</span></span> <span data-ttu-id="28a4e-192">Реализуйте классы в агенте, которые наследуются от этих классов.</span><span class="sxs-lookup"><span data-stu-id="28a4e-192">Implement classes in your agent that inherit from these classes.</span></span> <span data-ttu-id="28a4e-193">В производном классе фабрики агентов Переопределите метод **креатеажент** таким образом, чтобы он возвращал новый экземпляр класса агента.</span><span class="sxs-lookup"><span data-stu-id="28a4e-193">In the agent factory derived class, override the **CreateAgent** method so that it returns a new instance of your agent class.</span></span> 
  
<span data-ttu-id="28a4e-194">Аргументы, передаваемые событиям, могут содержать экземпляр класса [EmailMessage](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Email.EmailMessage.aspx) , с помощью которого можно изменить свойства и содержимое базового сообщения.</span><span class="sxs-lookup"><span data-stu-id="28a4e-194">Arguments passed to the events can contain an instance of the [EmailMessage](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Email.EmailMessage.aspx) class, which you can use to change the properties and contents of the underlying message.</span></span> <span data-ttu-id="28a4e-195">В каждом событии доступны не все сведения о сообщении.</span><span class="sxs-lookup"><span data-stu-id="28a4e-195">Not all message information is available in each event.</span></span> <span data-ttu-id="28a4e-196">Необходимо определить, какой агент и какое событие лучше всего подходит для задачи, которую необходимо выполнить.</span><span class="sxs-lookup"><span data-stu-id="28a4e-196">You must determine which agent and which event is best for the task you want to accomplish.</span></span> 
  
<span data-ttu-id="28a4e-197">Следующие пространства имен содержат типы, которые можно использовать для чтения, записи и изменения сообщений в транспортном конвейере.</span><span class="sxs-lookup"><span data-stu-id="28a4e-197">The following namespaces contain types that you can use to read, write, and modify messages in the transport pipeline:</span></span>
  
- [<span data-ttu-id="28a4e-198">Microsoft. Exchange. Data. MIME. Encoders</span><span class="sxs-lookup"><span data-stu-id="28a4e-198">Microsoft.Exchange.Data.Mime.Encoders</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Mime.Encoders.aspx)
    
- [<span data-ttu-id="28a4e-199">Microsoft. Exchange. Data. ContentTypes. iCalendar</span><span class="sxs-lookup"><span data-stu-id="28a4e-199">Microsoft.Exchange.Data.ContentTypes.iCalendar</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.iCalendar.aspx)
    
- [<span data-ttu-id="28a4e-200">Microsoft. Exchange. Data. MIME</span><span class="sxs-lookup"><span data-stu-id="28a4e-200">Microsoft.Exchange.Data.Mime</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Mime.aspx)
    
- [<span data-ttu-id="28a4e-201">Microsoft. Exchange. Data. ContentTypes. TNEF</span><span class="sxs-lookup"><span data-stu-id="28a4e-201">Microsoft.Exchange.Data.ContentTypes.Tnef</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.Tnef.aspx)
    
- [<span data-ttu-id="28a4e-202">Microsoft. Exchange. Data. ContentTypes. vCard</span><span class="sxs-lookup"><span data-stu-id="28a4e-202">Microsoft.Exchange.Data.ContentTypes.vCard</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.vCard.aspx)
    
<span data-ttu-id="28a4e-203">После того как вы запишете агент транспорта, вы [устанавливаете агент и управляете им](https://technet.microsoft.com/library/bb125175%28v=exchg.150%29.aspx) с помощью командной консоли Exchange.</span><span class="sxs-lookup"><span data-stu-id="28a4e-203">After you write your transport agent, you [install and manage your agent](https://technet.microsoft.com/library/bb125175%28v=exchg.150%29.aspx) by using the Exchange Management Shell.</span></span> <span data-ttu-id="28a4e-204">Дополнительные сведения см. в статье [Создание агентов транспорта для Exchange 2013](creating-transport-agents-for-exchange-2013.md).</span><span class="sxs-lookup"><span data-stu-id="28a4e-204">For more information, see [Creating transport agents for Exchange 2013](creating-transport-agents-for-exchange-2013.md).</span></span> 
  
## <a name="see-also"></a><span data-ttu-id="28a4e-205">См. также</span><span class="sxs-lookup"><span data-stu-id="28a4e-205">See also</span></span>

- [<span data-ttu-id="28a4e-206">Агенты транспорта в Exchange</span><span class="sxs-lookup"><span data-stu-id="28a4e-206">Transport agents in Exchange</span></span>](transport-agents-in-exchange-2013.md)    
- [<span data-ttu-id="28a4e-207">Справочник по агентам транспорта для Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="28a4e-207">Transport agent reference for Exchange 2013</span></span>](transport-agent-reference-for-exchange-2013.md)   
- [<span data-ttu-id="28a4e-208">Чтение и изменение сообщений в транспортном конвейере Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="28a4e-208">Reading and modifying messages in the Exchange 2013 transport pipeline</span></span>](reading-and-modifying-messages-in-the-exchange-2013-transport-pipeline.md)    
- [<span data-ttu-id="28a4e-209">Новые возможности Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="28a4e-209">What's New in Exchange 2013</span></span>](https://technet.microsoft.com/library/jj150540%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="28a4e-210">Архитектура ролей сервера Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="28a4e-210">Exchange 2013 Server Role Architecture</span></span>](https://blogs.technet.com/b/exchange/archive/2013/01/23/exchange-2013-server-role-architecture.aspx)    
- [<span data-ttu-id="28a4e-211">Серверы почтовых ящиков и клиентского доступа</span><span class="sxs-lookup"><span data-stu-id="28a4e-211">Mailbox and Client Access Servers</span></span>](https://technet.microsoft.com/library/jj150519%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="28a4e-212">Почтовые потоки Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="28a4e-212">Exchange Server 2013 Mail Flow</span></span>](https://technet.microsoft.com/library/aa996349.aspx)
- [<span data-ttu-id="28a4e-213">Маршрутизация почты Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="28a4e-213">Exchange Server 2013 Mail Routing</span></span>](https://technet.microsoft.com/library/aa998825%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="28a4e-214">PowerShell в Exchange Server (Командная консоль Exchange)</span><span class="sxs-lookup"><span data-stu-id="28a4e-214">Exchange Server PowerShell (Exchange Management Shell)</span></span>](https://docs.microsoft.com/powershell/exchange/exchange-server/exchange-management-shell?view=exchange-ps)
    

