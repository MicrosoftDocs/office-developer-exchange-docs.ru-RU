---
title: Обработка ошибок, связанных с уведомлениями, в EWS в Exchange
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: 519e1e52-5f1f-4f06-931e-8c20a586a563
description: Узнайте, как обрабатывать ошибки, связанные с уведомлениями, в приложениях, разрабатываемых с помощью управляемого API EWS или EWS в Exchange.
ms.openlocfilehash: cb0c16a74e68b5a16ef0f2011f65b22675950f58
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/25/2018
ms.locfileid: "19760955"
---
# <a name="handling-notification-related-errors-in-ews-in-exchange"></a>Обработка ошибок, связанных с уведомлениями, в EWS в Exchange

Узнайте, как обрабатывать ошибки, связанные с уведомлениями, в приложениях, разрабатываемых с помощью управляемого API EWS или EWS в Exchange.
  
Если приложение подписывается на уведомления и получает их, может потребоваться обработка ошибок, связанных с уведомлениями. Эти ошибки можно обрабатывать во время выполнения или при разработке приложения EWS.
  
**Таблица 1. Ошибки, связанные с уведомлениями, и способы их обработки**

|Ошибка|Возникает при попытке...|Обработать его по...|
|:-----|:-----|:-----|
|**еррорексцеедедконнектионкаунт** |Откройте подключение, чтобы получить события, когда учетная запись достигла предельного числа открытых потоков подключения. | <ul><li>Использование [олицетворения](http://technet.microsoft.com/en-us/library/dd776119%28v=exchg.150%29.aspx) для [открытия подключений](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_throttling).</li><li>Использование меньшего числа подключений для получения событий. Разверните максимальное число подписок в каждом подключении, [используя сходство](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md) и [поместив в одну группу не более 200 идентификаторов подписки](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_howdoimaintain). Затем можно использовать одно и то же подключение для получения событий для всей группы, уменьшая необходимое количество подключений.</li><li>  Изменение значения Хангингконнектионлимит в файле Web. config для локальной организации Exchange для переопределения значения по умолчанию для трех открытых подключений. В Exchange Online используется значение по умолчанию Хангингконнектионлимит, равное 10, что не является настраиваемым.</li></ul> |
|**еррорексцеедедсубскриптионкаунт** |Создание слишком большого числа подписок. Параметр политики регулирования [евсмакссубскриптионс](http://msdn.microsoft.com/en-us/library/microsoft.exchange.data.directory.systemconfiguration.throttlingpolicy.ewsmaxsubscriptions%28v=exchg.150%29.aspx) определяет максимальное количество подписок, которые могут создаваться учетной записью. | <ul><li>С помощью [олицетворения](http://technet.microsoft.com/en-us/library/dd776119%28v=exchg.150%29.aspx) [создайте подписку](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_throttling).</li><li>Уменьшение числа подписок.</li></ul> |
|**ерроринвалидсубскриптионрекуест** |Создание подписок для нескольких почтовых ящиков или нескольких папок из одного запроса.  |Создание подписки для одной общедоступной папки или одного почтового ящика в едином запросе.| 
|**ерроринвалидватермарк** |Получение событий с использованием недопустимого водяного знака.| <ul><li>Проверка идентификатора подписки, возвращенного в предыдущем ответе.</li><li>Проверка того, что вы отправляете идентификатор подписки для правильного объекта **ExchangeService** .</li><li>[Создание новой подписки](handling-notification-related-errors-in-ews-in-exchange.md#bk_recover).</li></ul> |
|**еррормисседнотификатионевентс** |Получение событий при пропуске некоторых предыдущих событий.   |Сравнение свойств расширенной папки **PR_LOCAL_COMMIT_TIME_MAX** (0x670a) и **PR_DELETED_COUNT_TOTAL** (0x670b), чтобы определить, какие изменения были пропущены, и создать [новую подписку](handling-notification-related-errors-in-ews-in-exchange.md#bk_recover).  |
|**еррорпроксирекуестноталловед** |Подпишитесь на события для пользователя в пакетном запросе, почтовый ящик которого был перемещен на другой сайт.   |Использование службы [автообнаружения](autodiscover-for-exchange.md) для повторного обнаружения Екстерналевсурл или евспартнерурл и создания новой подписки.  |
|**еррорреадевентсфаилед** |Получение событий из подписки, которые не удается найти.  |Использование службы [автообнаружения](autodiscover-for-exchange.md) для повторного обнаружения Екстерналевсурл или евспартнерурл и создания новой подписки.  |
|**еррорсервербуси** | Превышение ограничений [регулирования](ews-throttling-in-exchange.md#bk_ThrottlingNotifications) . Обратите внимание на следующие вопросы регулирования.<ul><li>Ограничение регулирования [евсмакссубскриптионс](http://msdn.microsoft.com/en-us/library/microsoft.exchange.data.directory.systemconfiguration.throttlingpolicy.ewsmaxsubscriptions%28v=exchg.150%29.aspx) определяет максимальное количество подписок на уведомление о принудительной или потоковой передаче, которые могут быть активными одновременно. Это значение подписки на почтовые ящики, а не число отдельных подписок на папку в подписке на почтовые ящики. Начиная с версий почтовых ящиков 14.16.0135 и 14.15.0057.000, почтовые ящики, размещенные в Exchange Online или Exchange Online в составе Office 365, могут иметь до 20 подписок, а целевой почтовый ящик Exchange 2013 может иметь до 5000 подписок.</li><li>Ограничение регулирования [евсмаксконкурренци](http://msdn.microsoft.com/en-us/library/microsoft.exchange.data.directory.systemconfiguration.throttlingpolicy.ewsmaxconcurrency%28v=exchg.150%29.aspx) определяет максимальное количество активных запросов для непотоковых подключений и имеет значение по умолчанию, равное 27.</li><li>По умолчанию предельное значение для открытых потоковых подключений составляет десять.</li></ul> |<ul><li>[Учитывая влияние политик регулирования, связанных с уведомлениями](ews-throttling-in-exchange.md#bk_ThrottlingNotifications) , и ограничения числа активных подписок и активных подключений, чтобы приложение не было отрегулировано.</li><li>Использование меньшего числа подключений для получения событий. Чтобы максимально увеличить количество подписок в каждом подключении, [Поместите в одну группу не более 200 идентификаторов подписки](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md). Затем можно использовать одно и то же подключение для получения событий для всей группы, уменьшая необходимое количество подключений.</li><li>Изменение значения Хангингконнектионлимит в файле Web. config для переопределения значения по умолчанию, равного десяти открытым потоковым подключениям.</li></ul>|
|**еррорсубскриптионнотфаунд** |Получение событий для подписки, которая не может быть найдена. Возможно, истек срок действия подписки, возможно, был перезапущен процесс EWS или была передана недопустимая подписка. | <ul><li>Проверка того, что вы используете тот же идентификатор подписки, который был возвращен в предыдущем ответе.</li><li>Проверка того, что вы отправляете идентификатор подписки для правильного объекта **ExchangeService** .</li><li> [Создание новой подписки](handling-notification-related-errors-in-ews-in-exchange.md#bk_recover).</li></ul> |
|**[сервицелокалексцептион](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.serviceresponseexception%28v=exchg.80%29.aspx)** |Добавить подписку в новую папку, когда подключение к подписке открыто в другой папке.  |Изменение подписки на подписку на все папки в почтовом ящике вместо конкретной папки.  |
|**[сервицереспонсиксцептион](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.serviceresponseexception%28v=exchg.80%29.aspx)** |Получение событий для подписки, которые не удается найти в хранилище Exchange.  | <ul><li>Проверка того, что вы используете тот же идентификатор подписки, который был возвращен в предыдущем ответе.</li><li>Проверка того, что вы отправляете идентификатор подписки для правильного объекта **ExchangeService** .</li></ul> |
   
## <a name="recovering-from-lost-subscriptions"></a>Восстановление из потерянных подписок
<a name="bk_recover"> </a>

Если подписка потеряна или более недоступна, рекомендуется создать новую подписку и не включать старую подложку в новую подписку. Повторная подписка с использованием старого водяного знака приводит к появлению линейного сканирования для событий, что является затратным. Вместо этого создайте новую подписку и сравните свойства папки, чтобы найти изменения содержимого, произошедшие между потерянной подпиской и новой подпиской. Рекомендуется проверить расширенные свойства папки **PR_LOCAL_COMMIT_TIME_MAX** (0x670a0040) и **PR_DELETED_COUNT_TOTAL** (0x670b0003). Это можно сделать, [создав определение расширенного свойства](properties-and-extended-properties-in-ews-in-exchange.md).
  
## <a name="see-also"></a>См. также

- [Подписки на уведомления, события почтовых ящиков и службы EWS в Exchange](notification-subscriptions-mailbox-events-and-ews-in-exchange.md)
- [Потоковая передача уведомлений о событиях почтовых ящиков с помощью веб-служб Exchange в Exchange](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)    
- [Уведомления по запросу о событиях почтовых ящиков с помощью веб-служб Exchange в Exchange](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)    
- [Поддержание сходства между группой подписок и сервером почтовых ящиков в Exchange](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md)
    

