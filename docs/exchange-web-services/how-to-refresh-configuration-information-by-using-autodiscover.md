---
title: Обновление сведений о конфигурации с помощью службы автообнаружения
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: c2f3c6a5-e8ea-4375-b41a-686a6f238d33
description: Узнайте, как и когда до обновления сведений о конфигурации для подключения к Exchange с помощью службы автообнаружения.
ms.openlocfilehash: 764909fbe5e4cd62ba6e05bfa4b2c417ef41a9ae
ms.sourcegitcommit: 9061fcf40c218ebe88911783f357b7df278846db
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/28/2018
ms.locfileid: "21353058"
---
# <a name="refresh-configuration-information-by-using-autodiscover"></a><span data-ttu-id="ff54b-103">Обновление сведений о конфигурации с помощью службы автообнаружения</span><span class="sxs-lookup"><span data-stu-id="ff54b-103">Refresh configuration information by using Autodiscover</span></span>

<span data-ttu-id="ff54b-104">Узнайте, как и когда до обновления сведений о конфигурации для подключения к Exchange с помощью службы автообнаружения.</span><span class="sxs-lookup"><span data-stu-id="ff54b-104">Learn how and when to refresh configuration information for your Exchange connection by using Autodiscover.</span></span>
  
<span data-ttu-id="ff54b-105">При запуске приложения веб-служб Exchange в первый раз, автообнаружения предоставляет отличный способ сбора информацию, необходимую для подключения к почтовому ящику Exchange пользователя.</span><span class="sxs-lookup"><span data-stu-id="ff54b-105">When your EWS application runs for the first time, Autodiscover provides a great way for you to collect the information you need in order to connect to your user's Exchange mailbox.</span></span> <span data-ttu-id="ff54b-106">Но автообнаружения не только для первоначального применения.</span><span class="sxs-lookup"><span data-stu-id="ff54b-106">But Autodiscover isn't just for first time use.</span></span> <span data-ttu-id="ff54b-107">Использование функции автоматического обнаружения на регулярной основе обеспечивают безопасность приложения подключена, включив его реагировать на изменения в развертывании Exchange.</span><span class="sxs-lookup"><span data-stu-id="ff54b-107">Using Autodiscover on a regular basis can help keep your application connected by enabling it to respond to changes in the Exchange deployment.</span></span>
  
## <a name="cache-autodiscover-endpoint-and-ews-settings"></a><span data-ttu-id="ff54b-108">Кэширование конечных точек службы автообнаружения и параметров веб-служб Exchange</span><span class="sxs-lookup"><span data-stu-id="ff54b-108">Cache Autodiscover endpoint and EWS settings</span></span>
<span data-ttu-id="ff54b-109"><a name="bk_CacheSettings"> </a></span><span class="sxs-lookup"><span data-stu-id="ff54b-109"></span></span>

<span data-ttu-id="ff54b-110">Хотя мы рекомендуется использовать службы автообнаружения регулярно, как регулярно используйте требует некоторые процедуры.</span><span class="sxs-lookup"><span data-stu-id="ff54b-110">While we recommend that you use Autodiscover regularly, how regularly you use it requires some consideration.</span></span> <span data-ttu-id="ff54b-111">В идеальном варианте можно сбалансировать быстро отвечать на изменения в среде с создания слишком много ненужных сетевого трафика.</span><span class="sxs-lookup"><span data-stu-id="ff54b-111">Ideally you can balance responding quickly to changes in the environment against generating too much unnecessary network traffic.</span></span> <span data-ttu-id="ff54b-112">Когда приложение получает успешного ответа службы автообнаружения в первый раз, следует сохранить со следующими сведениями, чтобы повторить процесс автоматического обнаружения, каждый раз при отправке запроса EWS не нужно.</span><span class="sxs-lookup"><span data-stu-id="ff54b-112">When your application gets a successful Autodiscover response for the first time, you should save the following information so that you do not have to repeat the Autodiscover process every time you send an EWS request.</span></span>
  
<span data-ttu-id="ff54b-113">**В таблице 1. Запрашивает сведения о кэше для службы автообнаружения**</span><span class="sxs-lookup"><span data-stu-id="ff54b-113">**Table 1. Information to cache for Autodiscover requests**</span></span>

|<span data-ttu-id="ff54b-114">**Установка для кэша**</span><span class="sxs-lookup"><span data-stu-id="ff54b-114">**Setting to cache**</span></span>|<span data-ttu-id="ff54b-115">**Допустимый для...**</span><span class="sxs-lookup"><span data-stu-id="ff54b-115">**Valid for…**</span></span>|<span data-ttu-id="ff54b-116">**Сведения**</span><span class="sxs-lookup"><span data-stu-id="ff54b-116">**Details**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="ff54b-117">Конечная точка службы автообнаружения</span><span class="sxs-lookup"><span data-stu-id="ff54b-117">Autodiscover endpoint</span></span>  <br/> |<span data-ttu-id="ff54b-118">Поскольку это работает</span><span class="sxs-lookup"><span data-stu-id="ff54b-118">As long as it works</span></span>  <br/> |<span data-ttu-id="ff54b-119">При сохранении конечная точка службы автообнаружения, возвращенный успешного ответа, повторите процесс [создания списка конечных точек службы автообнаружения](how-to-generate-a-list-of-autodiscover-endpoints.md) и ознакомления с их до получения успешного ответа не нужно.</span><span class="sxs-lookup"><span data-stu-id="ff54b-119">When you save the Autodiscover endpoint that returned a successful response, you do not have to repeat the process of [generating a list of Autodiscover endpoints](how-to-generate-a-list-of-autodiscover-endpoints.md) and trying them until you get a successful response.</span></span><br/><br/> <span data-ttu-id="ff54b-120">**Примечание**: управляемый API EWS не поддерживает кэширование конечных точек службы автообнаружения.</span><span class="sxs-lookup"><span data-stu-id="ff54b-120">**NOTE**: The EWS Managed API does not support caching the Autodiscover endpoint.</span></span>           |
|<span data-ttu-id="ff54b-121">URL-адрес веб-служб Exchange и другие параметры извлекается из ответа службы автообнаружения</span><span class="sxs-lookup"><span data-stu-id="ff54b-121">EWS URL and any other settings retrieved from the Autodiscover response</span></span>  <br/> |<span data-ttu-id="ff54b-122">24 часа</span><span class="sxs-lookup"><span data-stu-id="ff54b-122">24 hours</span></span>  <br/> |<span data-ttu-id="ff54b-123">Путем сохранения в URL-адрес веб-служб Exchange и другие параметры, связанные со, необходимо [Отправить запрос нового автообнаружения](how-to-get-user-settings-from-exchange-by-using-autodiscover.md) для каждого запроса веб-служб Exchange или если приложение перезапускается.</span><span class="sxs-lookup"><span data-stu-id="ff54b-123">By saving the EWS URL and other related settings, you do not have to [send a new Autodiscover request](how-to-get-user-settings-from-exchange-by-using-autodiscover.md) for each EWS request or if your application restarts.</span></span> <span data-ttu-id="ff54b-124">Тем не менее, даже в том случае, если URL-адрес веб-служб Exchange работает для пользователей, сервер может быть доступно то есть более оптимальным.</span><span class="sxs-lookup"><span data-stu-id="ff54b-124">However, even if an EWS URL works for your user, a server might be available that is more optimal.</span></span><br/><br/> <span data-ttu-id="ff54b-125">Например в почтовый ящик был перемещен на новый сервер почтовых ящиков, приведшего к новой основной конечной точки веб-служб Exchange.</span><span class="sxs-lookup"><span data-stu-id="ff54b-125">For example, the user's mailbox might have moved to a new mailbox server, resulting in a new preferred EWS endpoint.</span></span> <span data-ttu-id="ff54b-126">Рекомендуется обновить настройки пользователя, отправив запрос нового автообнаружения после выполнения 24 часов с момента последнего запроса службы автообнаружения.</span><span class="sxs-lookup"><span data-stu-id="ff54b-126">We recommend that you refresh your user settings by sending a new Autodiscover request after 24 hours have passed since your last Autodiscover request.</span></span> <span data-ttu-id="ff54b-127">В этом времени можно настроить в соответствии с требованиями вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="ff54b-127">This time can be adjusted to meet the requirements of your application.</span></span>  <br/> |
   
## <a name="refresh-cached-configuration-information"></a><span data-ttu-id="ff54b-128">Обновление сведений о конфигурации кэширования</span><span class="sxs-lookup"><span data-stu-id="ff54b-128">Refresh cached configuration information</span></span>
<span data-ttu-id="ff54b-129"><a name="bk_RefreshConfig"> </a></span><span class="sxs-lookup"><span data-stu-id="ff54b-129"></span></span>

<span data-ttu-id="ff54b-130">Теперь, когда у вас есть сведения кэширования, давайте рассмотрим, как можно сохранить этот кэш актуальными.</span><span class="sxs-lookup"><span data-stu-id="ff54b-130">Now that you have the information cached, let's examine how you can keep that cache fresh.</span></span> <span data-ttu-id="ff54b-131">Мы рекомендуем обновите кэшированные сведения при:</span><span class="sxs-lookup"><span data-stu-id="ff54b-131">We recommend that you refresh your cached information when:</span></span>
  
- <span data-ttu-id="ff54b-132">Сведения о срока.</span><span class="sxs-lookup"><span data-stu-id="ff54b-132">The information's validity period expires.</span></span>
    
- <span data-ttu-id="ff54b-133">[Ошибки, связанные с подключения](#bk_ConnectionErrors) происходит.</span><span class="sxs-lookup"><span data-stu-id="ff54b-133">A [Connection-related errors](#bk_ConnectionErrors) occurs.</span></span> 
    
<span data-ttu-id="ff54b-134">Чтобы обновить кэшированные сведения, отправки запроса службы автообнаружения для кэширования конечной точки службы автообнаружения и выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="ff54b-134">To refresh your cached information, send an Autodiscover request to a cached Autodiscover endpoint, and do the following:</span></span>
  
- <span data-ttu-id="ff54b-135">Если запрос пройдет успешно, сравнение конечной точки веб-служб Exchange в ответе с кэшированной конечной точки веб-служб Exchange и выполните следующее:</span><span class="sxs-lookup"><span data-stu-id="ff54b-135">If the request succeeds, compare the EWS endpoint in the response with the cached EWS endpoint, and do the following:</span></span>
    
  - <span data-ttu-id="ff54b-136">Если они не совпадают, используйте новую конечную точку веб-служб Exchange.</span><span class="sxs-lookup"><span data-stu-id="ff54b-136">If they are different, use the new EWS endpoint.</span></span> <span data-ttu-id="ff54b-137">Если вы обновление восстановиться после ошибки, повторите неудачных запросов с новой конечной точкой.</span><span class="sxs-lookup"><span data-stu-id="ff54b-137">If you're refreshing to recover from an error, retry the failed request with the new endpoint.</span></span>
    
  - <span data-ttu-id="ff54b-138">Если это так же, продолжить использование исходной конечной точки веб-служб Exchange.</span><span class="sxs-lookup"><span data-stu-id="ff54b-138">If they are the same, continue to use the original EWS endpoint.</span></span> <span data-ttu-id="ff54b-139">Если вы обновление восстановиться после ошибки, обработайте ошибки соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="ff54b-139">If you're refreshing to recover from an error, handle the error as appropriate.</span></span>
    
- <span data-ttu-id="ff54b-140">Если не удается выполнить запрос, запуск [процесса автообнаружения](autodiscover-for-exchange.md) с самого начала.</span><span class="sxs-lookup"><span data-stu-id="ff54b-140">If the request fails, start the [Autodiscover process](autodiscover-for-exchange.md) from the beginning.</span></span> <span data-ttu-id="ff54b-141">После получения успешного ответа, замените кэшированные конечной точки службы автообнаружения конечная точка службы автообнаружения, успешно и продолжить использовать новую конечную точку веб-служб Exchange.</span><span class="sxs-lookup"><span data-stu-id="ff54b-141">After you get a successful response, replace the cached Autodiscover endpoint with the Autodiscover endpoint that succeeded and continue to use the new EWS endpoint.</span></span> <span data-ttu-id="ff54b-142">Если вы не для получения успешного ответа, продолжить использование исходной конечной точки службы автообнаружения и конечной точки веб-служб Exchange.</span><span class="sxs-lookup"><span data-stu-id="ff54b-142">If you do not get a successful response, continue to use the original Autodiscover endpoint and EWS endpoint.</span></span> <span data-ttu-id="ff54b-143">Если вы обновление восстановиться после ошибки, обработайте ошибки соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="ff54b-143">If you're refreshing to recover from an error, handle the error as appropriate.</span></span> 
    
<span data-ttu-id="ff54b-144">На следующем рисунке представлены визуальным представлением этого процесса.</span><span class="sxs-lookup"><span data-stu-id="ff54b-144">The following figure provides a visual representation of this process.</span></span>
  
<span data-ttu-id="ff54b-145">**На рисунке 1. Процесс обновления сведений о конфигурации с помощью службы автообнаружения**</span><span class="sxs-lookup"><span data-stu-id="ff54b-145">**Figure 1. Process for refreshing configuration information by using Autodiscover**</span></span>

![Схема обновления данных конфигурации при автообнаружении.](media/Ex15_Autodiscover_Refresh_Flowchart.png)
  
### <a name="connection-related-errors"></a><span data-ttu-id="ff54b-147">Ошибки, связанные с подключения</span><span class="sxs-lookup"><span data-stu-id="ff54b-147">Connection-related errors</span></span>
<span data-ttu-id="ff54b-148"><a name="bk_ConnectionErrors"> </a></span><span class="sxs-lookup"><span data-stu-id="ff54b-148"></span></span>

<span data-ttu-id="ff54b-149">Обновление сведений о конфигурации кэширования могут помочь в некоторые ошибки, но не все.</span><span class="sxs-lookup"><span data-stu-id="ff54b-149">Refreshing your cached configuration information can help with some errors, but not all.</span></span> 
  
<span data-ttu-id="ff54b-150">**В таблице 2. Ошибки, адресуемый обновления вашей кэша**</span><span class="sxs-lookup"><span data-stu-id="ff54b-150">**Table 2. Errors addressed by refreshing your cache**</span></span>

|<span data-ttu-id="ff54b-151">**Error**</span><span class="sxs-lookup"><span data-stu-id="ff54b-151">**Error**</span></span>|<span data-ttu-id="ff54b-152">**Управляемый API EWS реализации**</span><span class="sxs-lookup"><span data-stu-id="ff54b-152">**EWS Managed API implementation**</span></span>|<span data-ttu-id="ff54b-153">**Примечания**</span><span class="sxs-lookup"><span data-stu-id="ff54b-153">**Notes**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="ff54b-154">Ошибки при DNS или в сети</span><span class="sxs-lookup"><span data-stu-id="ff54b-154">DNS or network failure errors</span></span><br/><br/> <span data-ttu-id="ff54b-155">Пример: Не удалось найти имя узла.</span><span class="sxs-lookup"><span data-stu-id="ff54b-155">Example: Host name could not be found.</span></span>  <br/> |[<span data-ttu-id="ff54b-156">ServiceRemoteException</span><span class="sxs-lookup"><span data-stu-id="ff54b-156">ServiceRemoteException</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.WebServices.Data.ServiceRemoteException.aspx) <br/> |<span data-ttu-id="ff54b-157">На ошибки, которое указывает, что сервер не найден или не удалось подключиться к может быть решена ознакомления с службы автообнаружения.</span><span class="sxs-lookup"><span data-stu-id="ff54b-157">Any error that indicates that the server could not be found or could not be reached might be resolved by trying Autodiscover.</span></span> <br/><br/> <span data-ttu-id="ff54b-158">Кэшированные конечной точки веб-служб Exchange могут стать недействительными и автоматического обнаружения могут быть меньше, чтобы они указывали на новый сервер.</span><span class="sxs-lookup"><span data-stu-id="ff54b-158">Your cached EWS endpoint might no longer be valid, and Autodiscover might be able to point you to the new server.</span></span>  <br/> |
|<span data-ttu-id="ff54b-159">Состояние ошибки HTTP</span><span class="sxs-lookup"><span data-stu-id="ff54b-159">HTTP status errors</span></span><br/><br/> <span data-ttu-id="ff54b-160">Пример: 503 Служба недоступна</span><span class="sxs-lookup"><span data-stu-id="ff54b-160">Example: 503 Service Unavailable</span></span>  <br/> |[<span data-ttu-id="ff54b-161">ServiceRemoteException</span><span class="sxs-lookup"><span data-stu-id="ff54b-161">ServiceRemoteException</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.WebServices.Data.ServiceRemoteException.aspx) <br/> |<span data-ttu-id="ff54b-162">Состояние ошибки HTTP может произойти по разным причинам.</span><span class="sxs-lookup"><span data-stu-id="ff54b-162">HTTP status errors can happen for many different reasons.</span></span><br/><br/> <span data-ttu-id="ff54b-163">Тем не менее рекомендуется попробовать автообнаружения для получения новой конечной точки веб-служб Exchange для пользователя.</span><span class="sxs-lookup"><span data-stu-id="ff54b-163">However, it's a good idea to try Autodiscover to see if a new EWS endpoint is available for the user.</span></span>  <br/> |
|<span data-ttu-id="ff54b-164">Коды ошибок веб-служб Exchange</span><span class="sxs-lookup"><span data-stu-id="ff54b-164">EWS error codes</span></span> <br/><br/> <span data-ttu-id="ff54b-165">Пример: ErrorConnectionFailed</span><span class="sxs-lookup"><span data-stu-id="ff54b-165">Example: ErrorConnectionFailed</span></span> <br/> |[<span data-ttu-id="ff54b-166">ResponseCodeType</span><span class="sxs-lookup"><span data-stu-id="ff54b-166">ResponseCodeType</span></span>](../web-service-reference/responsecode.md) <br/> | <span data-ttu-id="ff54b-167">Большинство кодов ошибок веб-служб Exchange не гарантирует обновление сведений о конфигурации.</span><span class="sxs-lookup"><span data-stu-id="ff54b-167">Most EWS error codes don't warrant refreshing your configuration information.</span></span><br/><br/> <span data-ttu-id="ff54b-168">Тем не менее следующие специально указывают, что необходимо обновить сведения о конфигурации:</span><span class="sxs-lookup"><span data-stu-id="ff54b-168">However, the following specifically indicate that the configuration information needs to be updated:</span></span><br/><span data-ttu-id="ff54b-169">- **ErrorConnectionFailed**</span><span class="sxs-lookup"><span data-stu-id="ff54b-169">- **ErrorConnectionFailed**</span></span> <br/><span data-ttu-id="ff54b-170">- **ErrorMailboxMoveInProgress**</span><span class="sxs-lookup"><span data-stu-id="ff54b-170">- **ErrorMailboxMoveInProgress**</span></span> <br/> |
   
## <a name="see-also"></a><span data-ttu-id="ff54b-171">См. также</span><span class="sxs-lookup"><span data-stu-id="ff54b-171">See also</span></span>

- [<span data-ttu-id="ff54b-172">Автообнаружение для Exchange</span><span class="sxs-lookup"><span data-stu-id="ff54b-172">Autodiscover for Exchange</span></span>](autodiscover-for-exchange.md)  
- [<span data-ttu-id="ff54b-173">Создание списка конечных точек автообнаружения</span><span class="sxs-lookup"><span data-stu-id="ff54b-173">Generate a list of Autodiscover endpoints</span></span>](how-to-generate-a-list-of-autodiscover-endpoints.md)   
- [<span data-ttu-id="ff54b-174">Получить параметры пользователя из Exchange с помощью службы автообнаружения</span><span class="sxs-lookup"><span data-stu-id="ff54b-174">Get user settings from Exchange by using Autodiscover</span></span>](how-to-get-user-settings-from-exchange-by-using-autodiscover.md)
    

