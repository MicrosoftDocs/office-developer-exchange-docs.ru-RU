---
title: Модуль записи Exchange в Exchange 2013
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: ec126433-9f0a-46ec-a685-ff4af2f97bc1
description: Сведения о записи Exchange в Exchange 2013 для резервного копирования и восстановления.
ms.openlocfilehash: a4dc5963ab24a83969efc6e425b38a35276f3aa3
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/11/2018
ms.locfileid: "19760916"
---
# <a name="exchange-writer-in-exchange-2013"></a>Модуль записи Exchange в Exchange 2013

Сведения о записи Exchange в Exchange 2013 для резервного копирования и восстановления. 
  
**Применимо к:** Exchange Server 2013 
  
Модуль записи Exchange несет ответственность за резервное копирование и восстановление из активных баз данных Exchange Server 2013. Записи Exchange также поддерживает функции архивации для выбранной базы данных, где теневая копия берется с экземпляром реплицированной базы данных и транзакций файлов журнала. 
  
## <a name="overview-of-the-exchange-writer"></a>Общие сведения о записи Exchange
<a name="bk_Overview"> </a>

Exchange 2013 включает в себя функции мобильности базы данных, позволяющие баз данных для репликации между серверами разных Exchange для повышения доступности базы данных и устойчивости сайтов. Другие копии базы данных в группе доступности базы данных (DAG) предоставляют ценную возможность для процессов резервного копирования Exchange использовать дополнительные ресурсы, доступные в расположении копии. Кроме того так как создается резервная копия вместо хозяином активной базы данных копии могут быть недоступны во время резервного копирования на длительный период времени. 
  
Модуль записи Exchange поддерживает служб Exchange (эксплуатация от имени инициатор запроса) для подготовки файлов базы данных для резервного копирования, заморозить для ввода/ВЫВОДА для действия, связанные с Exchange операций перед резервного копирования базы данных и освободить и усекать файлы журналов после завершения резервного копирования.
  
Во время восстановления резервное копирование и восстановление приложения, этот параметр модуля записи Exchange для координации с хранилищем Exchange (эксплуатация от имени инициатор запроса) для проверки целей восстановления, переименуйте файл базы данных при необходимости и затем повторить процесс журналы при необходимости. Модуль записи Exchange поддерживает резервное копирование и восстановление.
  
Модуль записи Exchange доступна на любом сервере Exchange, с установленной ролью сервера почтовых ящиков. 
  
## <a name="exchange-writer-configuration-settings"></a>Параметры конфигурации модуля записи Exchange
<a name="bk_ExchangeWriterConfig"> </a>

Модуль записи Exchange для VSS использует различные параметры и значения, которые необходимо правильно настроить и сохраняется во время операции резервного копирования и восстановления. Эти параметры конфигурации хранятся в документ метаданных модуля записи Exchange. Если ваше приложение резервного копирования не сохраняет эти параметры, могут возникнуть непредвиденные ошибки при попытке выполнить резервное копирование баз данных Exchange. 
  
В следующей таблице перечислены интерфейсы VSS, метаданные о компонентах резервного копирования базы данных. Эти интерфейсы необходимы для получения модуля записи Exchange документа метаданных, который используется для выполнения резервного копирования в хранилище Exchange.
  
**В таблице 1. Служба теневого копирования ТОМОВ интерфейсов**

|**Интерфейс служба теневого копирования ТОМОВ**|**Описание**|
|:-----|:-----|
|IVssWMComponent  <br/> |Разрешает доступ компонент информацию, содержащуюся в модуля записи Exchange.  <br/> |
|IVssExamineWriterMetadata  <br/> |Разрешает запрашивающее приложение резервного копирования и восстановления для просмотра метаданных модуля записи Exchange. Документ метаданных модуля записи Exchange содержит значений, зависимых от Exchange 2013 и параметры, запрашивающее приложение резервного копирования и восстановления требует, чтобы он правильно можно указать необходимые компоненты для резервного копирования.  <br/> |
|IVssComponent  <br/> |Содержит методы для изучения и изменения данных о компонентах в документах компоненты инициатора резервного копирования. Объекты можно получить только для тех компонентов, которые были явно добавлены в этом документе с помощью метода [IVssBackupComponents::AddComponent](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382646%28v=vs.85%29.aspx) .  <br/> |
|IVssBackupComponents  <br/> |Используется запрашивающее приложение резервного копирования и восстановления для опроса модуля записи Exchange о состоянии файла и для выполнения резервного копирования и восстановления. Метод [IVssBackupComponents::SetBackupState](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382833%28v=vs.85%29.aspx) определяет, является ли операция резервного копирования полное, копия, добавочный, или разностного резервного копирования. Метод [IVssBackupComponents::AddRestoreSubcomponent](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382649%28v=vs.85%29.aspx) определяет подкомпоненты в Exchange 2013 базы данных, можно выбрать для операции восстановления.  <br/> |
   
В файловой системе Windows Server базы данных Exchange 2013 сохраняется как файл одну базу данных с расширением *.edb. Предоставляет модуля записи Exchange *.edb как компонент базы данных и журналов транзакций (*.log) и файлы контрольной точки (*.chk) объединяются в один компонент, называется компонент журнала. Дополнительные сведения о файлах базы данных Exchange в разделе [Основные понятия резервного копирования и восстановления для Exchange 2013](backup-and-restore-concepts-for-exchange-2013.md).
  
## <a name="interactions-between-the-exchange-writer-vss-and-vss-requesters"></a>Взаимодействие между модуля записи Exchange, служба теневого копирования ТОМОВ и служба теневого копирования ТОМОВ инициатор запроса
<a name="bk_interactions"> </a>

Высокоуровневая взаимодействие между VSS, модуля записи Exchange и Exchange 2013 во время операции резервного копирования выглядит следующим образом:
  
1. Резервной копии программы (или агент) запускает запланированное задание. 
    
2. Источник запроса служба теневого копирования ТОМОВ в приложении резервное копирование и восстановление отправляет команду служба теневого копирования ТОМОВ на создание теневой копии выбранных баз данных Exchange 2013. 
    
3. Служба теневого копирования ТОМОВ взаимодействует с помощью модуля записи Exchange для подготовки к резервной копии моментального снимка. Exchange 2013 запрещает административных действий для баз данных, проверяет зависимости тома и приостанавливает все операции записи для выбранного экземпляра базы данных и файлы журнала транзакций и разрешить доступ только для чтения. 
    
4. Служба теневого копирования ТОМОВ взаимодействует с соответствующим поставщиком хранилища, чтобы создать теневую копию тома хранилища, содержащего баз данных Exchange 2013. 
    
5. Служба теневого копирования ТОМОВ освобождает Exchange 2013 для возобновления стандартных операций. 
    
6. Источник запроса VSS проверяет физической согласованности резервного набора данных перед сигналы успешности завершения резервного копирования. Exchange 2013 длинного журналы транзакций (если база данных является частью группы DAG, усечение журнала является реплицируются все копии) и регистрирует время последнего резервного копирования базы данных.
    
Служба теневого копирования ТОМОВ сериализации инициатор запроса взаимодействие с помощью модуля записи Exchange, начиная с помощью метода [OnPrepareBackup](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381571%28v=vs.85%29.aspx) и метод [OnPostSnapshot](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381568%28v=vs.85%29.aspx) . Как правило большую часть времени модуля записи Exchange тратит, работая с теневой копии происходит после метода **OnPostSnapshot** , когда проверки согласованности теневой копии до завершения резервных копий. Модуль записи Exchange поддерживает параллельных резервных копий между **OnPostSnapshot** и [OnBackupComplete](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381557%28v=vs.85%29.aspx).
  
Exchange 2013 не разрешает параллельных резервных копий той же базе данных. Только один задания резервного копирования может выполняться для этой базы данных за один раз. При выполнении резервного копирования, в хранилище Exchange переводит базу данных в резервной копии в процессе выполнения. Это состояние в памяти снят, либо по завершении резервного копирования или при запуске службы. Состояние резервное копирование выполняется в памяти и связанные с ним данные не сохраняются при перезапуске службы, на котором размещается модуля записи Exchange, после перезапуска операционной системы или в случае сбоя кластера. Любое из этих событий будет отображено задание резервного копирования для отработки отказа.
  
Усечение файла журнала транзакций, инициированных пользователем резервного копирования запускается на основе типа выполняемой резервной копии. В конфигурациях без обеспечения доступности баз данных модуля записи Exchange будет удалять файлы журнала транзакций после завершения работы программы успешного полного или разностного резервного копирования. В группы доступности базы данных репликации конфигураций, усечение журнала будет отложено службой репликации, пока все необходимые файлы записываются в других копий. Служба репликации приведет к удалению резервной копии файлов журнала, как из активного и эту копию пути к файлам журнала после проверяется, что файлы журнала успешно применена к копию базы данных и оба активной базы данных и истекло контрольной точки копий базы данных файлы журналов для удаления.
  
## <a name="see-also"></a>См. также

- [Журналы транзакций и файлов контрольной точки для резервного копирования и восстановления в Exchange 2013](transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange.md)
    
- [Основные понятия резервного копирования и восстановления для Exchange 2013](backup-and-restore-concepts-for-exchange-2013.md)
    

