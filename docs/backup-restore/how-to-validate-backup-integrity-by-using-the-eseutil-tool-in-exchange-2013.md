---
title: Проверка целостности резервной копии с помощью средства Eseutil в Exchange 2013
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: b0d325ba-4482-4ca2-9a69-c890f985b206
description: Узнайте, как использовать средство командной строки средства Eseutil для проверки резервной копии в хранилище Exchange.
ms.openlocfilehash: 03c4c23d433418911240bbe7c337308a989f3739
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/25/2018
ms.locfileid: "19760915"
---
#  <a name="validate-backup-integrity-by-using-the-eseutil-tool-in-exchange-2013"></a>Проверка целостности резервной копии с помощью средства Eseutil в Exchange 2013

Узнайте, как использовать средство командной строки средства Eseutil для проверки резервной копии в хранилище Exchange. 
  
**Применимо к:** Exchange Server 2013 
  
Так как тома теневой копии Service (VSS) можно создавать резервные копии, при записи в базу данных Exchange, сервер не всех страниц и выполнить проверку согласованности необходимости. По этой причине любые резервное копирование и восстановление приложения, использующего служба теневого копирования ТОМОВ необходимо проверить согласованности моментального снимка. Exchange Server 2013 поддерживает следующие два метода для проверки согласованности моментального снимка. 
  
- CHKSGFILES API
    
- Средство командной строки средства Eseutil
    
Мы рекомендуем использовать CHKSGFILES API, так как проще приложение резервного копирования определить, вам в диагностике и проверьте ошибки, обнаруженные во время CHKSGFILES согласованности. Сведения о том, как использовать CHKSGFILES API можно [проверки целостности резервной копии с помощью CHKSGFILES API в Exchange 2013](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md).
  
## <a name="running-the-eseutil-tool"></a>Выполнение средства Eseutil

Проверка согласованности моментального снимка, выполните команду eseutil с файлами базы данных и журналов, перечисленные в следующей таблице. 
  
**В таблице 1. Команды Eseutil.exe для каждого типа резервного копирования**

|**Тип файла тип/резервного копирования**|**Полное резервное копирование**|**Резервное копирование**|**Добавочное резервное копирование**|**Разностного резервного копирования**|
|:-----|:-----|:-----|:-----|:-----|
|.edb  <br/> |«eseutil /k /i»  <br/> |«eseutil /k /i»  <br/> |Не применимо  <br/> |Не применимо  <br/> |
|.log  <br/> |«eseutil /k» (1)  <br/> |«eseutil /k» (1)  <br/> |«eseutil /k» (2)  <br/> |«eseutil /k» (2)  <br/> |
   
> [!NOTE]
> Необходимо выполнить команду eseutil для файлов .stm и .chk. 
  
Все файлы журналов, которые имеют версии файла журнала, какой номер, равно или больше, чем поколения, число файлов журнала контрольной точки необходимы для восстановления моментального снимка базы данных. Если он существует, текущий файл журнала (Enn.log) также является обязательным для восстановления базы данных. Если любой из файлов журналов не проверки согласованности, источник запроса необходимо убедиться, что состояние компонента резервного копирования задано значение FALSE, перед вызовом метода [BackupComplete](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382651%28v=vs.85%29.aspx) . Для определения файла журнала контрольной точки, выполняться Eseutil.exe для моментального файла контрольной точки и разбора вывода для «контрольная точка:.» Следующем примере показано, как должно выполняться Eseutil.exe файл контрольной точки. 
  
```cpp
c:\eseutil.exe /mk E01.chk
Checkpoint: (0x20, 9D, 187)
```

Во второй строке пример является возвращаемого значения, где 0x20 — это номер версии журнала шестнадцатеричных файла журнала контрольной точки. В этом примере все файлы журналов, включая E01000020.log и выше, должен быть не поврежден для восстановления моментального снимка базы данных, даже если сама база данных уже прошла проверку физической согласованности.
  
Для восстановления базы данных требуются все файлы журналов в добавочного или разностного резервного набора. Вы можете проверить согласованность последовательности журналов, запустите Eseutil.exe префикс файла журнала. Следующий пример демонстрирует выполните проверку целостности всех файлов, вид E01xxxxx.log на заданном пути.
  
```cpp
c:\eseutil /k E01
```

## <a name="checking-the-eseutilexe-output"></a>Проверка Eseutil.exe выходных данных

Инициатор запроса должен убедитесь, что выход ERRORLEVEL значения ошибок, возвращаемых неотрицательное. Сведения о значениях ERRORLEVEL видеть [ссылку возникновения типичных ошибок Eseutil](http://technet.microsoft.com/en-us/library/aa996759%28v=exchg.80%29.aspx). Чтобы просмотреть ERRORLEVEL в командной строке введите «эхо % errorlevel %», после завершения Eseutil.exe. Отрицательное значение ERRORLEVEL означает повреждение одного или нескольких файлов.
  
Перед источник запроса вызывается метод **BackupComplete** , его убедитесь, что состояние компонента резервного копирования отражает результат проверки согласованности. Если были обнаружены все поврежденные состояние будет FALSE. Если повреждения не обнаружены, состояние будет значение TRUE. 
  
## <a name="see-also"></a>См. также

- [Проверка целостности резервной копии с помощью CHKSGFILES API в Exchange 2013](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md)
- [Построение резервное копирование и восстановление приложений для Exchange 2013](build-backup-and-restore-applications-for-exchange-2013.md)
- [Справочник по CChkSGFiles классов](cchksgfiles-class-reference.md)
- [Основные понятия резервного копирования и восстановления для Exchange 2013](backup-and-restore-concepts-for-exchange-2013.md)
    

