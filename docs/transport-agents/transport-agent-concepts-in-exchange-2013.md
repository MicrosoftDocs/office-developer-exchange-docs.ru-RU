---
title: Транспорта концепции агентов в Exchange 2013
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 0c700af8-2792-4d3f-8571-8860e0550d8e
description: Найдите сведения о влиянии архитектуры роли конвейера и сервер агента транспорта в Exchange 2013 на разработка агента транспорта и соответствующие им классы, которые можно использовать при разработке агенты транспорта.
ms.openlocfilehash: 9ddee0d68c9104357f84322b2cce7c5f2576d871
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/11/2018
ms.locfileid: "19761321"
---
# <a name="transport-agent-concepts-in-exchange-2013"></a><span data-ttu-id="fe63e-103">Транспорта концепции агентов в Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="fe63e-103">Transport agent concepts in Exchange 2013</span></span>

<span data-ttu-id="fe63e-104">Найдите сведения о влиянии архитектуры роли конвейера и сервер агента транспорта в Exchange 2013 на разработка агента транспорта и соответствующие им классы, которые можно использовать при разработке агенты транспорта.</span><span class="sxs-lookup"><span data-stu-id="fe63e-104">Find information about how the transport agent pipeline and server role architecture in Exchange 2013 affect transport agent development, and the classes that you can use to develop transport agents.</span></span> 
  
<span data-ttu-id="fe63e-105">**Применимо к:** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="fe63e-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="fe63e-106">Библиотека классов, представленные в Exchange Server 2013 можно использовать для реализации агенты транспорта, регистрации событий и выполните действия на сообщения, проходящие через транспортный конвейер.</span><span class="sxs-lookup"><span data-stu-id="fe63e-106">You can use the class library provided in Exchange Server 2013 to implement transport agents that register for events and take actions on messages as they pass through the transport pipeline.</span></span> <span data-ttu-id="fe63e-107">Агенты транспорта можно также использовать для изменения сообщений и преобразование содержимого.</span><span class="sxs-lookup"><span data-stu-id="fe63e-107">You can also use transport agents to modify messages and convert content.</span></span> 
  
<span data-ttu-id="fe63e-108">В этой статье представлены сведения о агенты транспорта и архитектура транспортный конвейер.</span><span class="sxs-lookup"><span data-stu-id="fe63e-108">This article provides information about transport agents and the transport pipeline architecture.</span></span> <span data-ttu-id="fe63e-109">Важно понимать архитектуру транспортный конвейер, чтобы его можно изменить поведение транспорта в соответствии с требованиями вашей организации.</span><span class="sxs-lookup"><span data-stu-id="fe63e-109">It is important to understand the architecture of the transport pipeline so that you can modify transport behavior to meet your organization's needs.</span></span> <span data-ttu-id="fe63e-110">В этой статье также предоставляет сведения об изменениях в архитектуре Exchange 2013, влияющие на агенты транспорта и соответствующие им классы, которые можно использовать при разработке агенты транспорта.</span><span class="sxs-lookup"><span data-stu-id="fe63e-110">This article also provides information about changes in the Exchange 2013 architecture that affect transport agents and the classes that you can use to develop transport agents.</span></span> 
  
## <a name="transport-agents-in-the-transport-pipeline"></a><span data-ttu-id="fe63e-111">Агенты транспорта в транспортный конвейер</span><span class="sxs-lookup"><span data-stu-id="fe63e-111">Transport agents in the transport pipeline</span></span>
<span data-ttu-id="fe63e-112"><a name="Pipeline"> </a></span><span class="sxs-lookup"><span data-stu-id="fe63e-112"></span></span>

<span data-ttu-id="fe63e-113">Агенты транспорта являются производными от одного из следующих трех классов:</span><span class="sxs-lookup"><span data-stu-id="fe63e-113">Transport agents are derived from one of the following three classes:</span></span>
  
- [<span data-ttu-id="fe63e-114">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="fe63e-114">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx)
- [<span data-ttu-id="fe63e-115">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="fe63e-115">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx)
- [<span data-ttu-id="fe63e-116">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="fe63e-116">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx)
    
<span data-ttu-id="fe63e-117">Транспортный конвейер относится к потоку данных сообщений в пределах организации Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="fe63e-117">The transport pipeline refers to the flow of message data within the boundaries of an Exchange 2013 organization.</span></span> <span data-ttu-id="fe63e-118">Конвейер состоит из служб, перечисленных в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="fe63e-118">The pipeline consists of the services listed in the following table.</span></span>
  
<span data-ttu-id="fe63e-119">**В таблице 1. Транспортный конвейер служб**</span><span class="sxs-lookup"><span data-stu-id="fe63e-119">**Table 1. Transport pipeline services**</span></span>

|<span data-ttu-id="fe63e-120">**Служба**</span><span class="sxs-lookup"><span data-stu-id="fe63e-120">**Service**</span></span>|<span data-ttu-id="fe63e-121">**Описание**</span><span class="sxs-lookup"><span data-stu-id="fe63e-121">**Description**</span></span>|<span data-ttu-id="fe63e-122">**Поддерживаемые классы**</span><span class="sxs-lookup"><span data-stu-id="fe63e-122">**Classes supported**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="fe63e-123">Транспорта переднего плана</span><span class="sxs-lookup"><span data-stu-id="fe63e-123">Front End Transport</span></span>  <br/> |<span data-ttu-id="fe63e-124">Запускается на всех [серверах клиентского доступа](http://technet.microsoft.com/en-us/library/dd298114%28v=exchg.150%29.aspx) и действует как прокси-сервер без сведений о состоянии для всех входящих и исходящих внешний SMTP-трафика для организации Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="fe63e-124">Runs on all [Client Access servers](http://technet.microsoft.com/en-us/library/dd298114%28v=exchg.150%29.aspx) and acts as a stateless proxy for all inbound and outbound external SMTP traffic for the Exchange 2013 organization.</span></span> <span data-ttu-id="fe63e-125">Служба транспорта переднего плана не проверки содержимого сообщения или его в очередь любые сообщения на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="fe63e-125">The Front End Transport service doesn't inspect message content or queue any messages locally.</span></span> <span data-ttu-id="fe63e-126">Он взаимодействует со службой транспорта на [сервере почтовых ящиков](http://technet.microsoft.com/en-us/library/jj150491%28v=exchg.150%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="fe63e-126">It communicates with the Transport service on a [Mailbox server](http://technet.microsoft.com/en-us/library/jj150491%28v=exchg.150%29.aspx).</span></span>  <br/> |[<span data-ttu-id="fe63e-127">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="fe63e-127">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> |
|<span data-ttu-id="fe63e-128">Транспорта</span><span class="sxs-lookup"><span data-stu-id="fe63e-128">Transport</span></span>  <br/> |<span data-ttu-id="fe63e-129">Выполняется на всех серверах почтовых ящиков и похож на роль [транспортного сервера-концентратора](http://technet.microsoft.com/en-us/library/bb123494%28v=exchg.141%29.aspx) в Exchange Server 2010.</span><span class="sxs-lookup"><span data-stu-id="fe63e-129">Runs on all Mailbox servers and is similar to the [Hub Transport server](http://technet.microsoft.com/en-us/library/bb123494%28v=exchg.141%29.aspx) role in Exchange Server 2010.</span></span> <span data-ttu-id="fe63e-130">Транспортная служба Маршрутизация сообщений между собой и службы транспорта почтовых ящиков и транспортного сервера переднего плана.</span><span class="sxs-lookup"><span data-stu-id="fe63e-130">The Transport service routes messages between itself and the Mailbox Transport and Front End Transport services.</span></span> <span data-ttu-id="fe63e-131">Эта служба не напрямую связываются с базы данных почтовых ящиков.</span><span class="sxs-lookup"><span data-stu-id="fe63e-131">This service does not communicate directly with mailbox databases.</span></span>  <br/> |[<span data-ttu-id="fe63e-132">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="fe63e-132">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> [<span data-ttu-id="fe63e-133">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="fe63e-133">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) <br/> [<span data-ttu-id="fe63e-134">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="fe63e-134">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) <br/> |
|<span data-ttu-id="fe63e-135">Транспорта почтовых ящиков</span><span class="sxs-lookup"><span data-stu-id="fe63e-135">Mailbox Transport</span></span>  <br/> |<span data-ttu-id="fe63e-136">Запускается на всех серверах почтовых ящиков и состоит из двух отдельных служб: отправки почтовых ящиков и транспортного доставки почтового ящика.</span><span class="sxs-lookup"><span data-stu-id="fe63e-136">Runs on all Mailbox servers and consists of two separate services: Mailbox Transport Submission and Mailbox Transport Delivery.</span></span> <span data-ttu-id="fe63e-137">Доставка транспорта почтовых ящиков принимает SMTP-сообщения из транспортной службы и подключается к базе данных почтовых ящиков с помощью Exchange удаленный вызов процедур (RPC) для доставки сообщения.</span><span class="sxs-lookup"><span data-stu-id="fe63e-137">Mailbox Transport Delivery receives SMTP messages from the Transport service, and connects to the mailbox database by using an Exchange remote procedure call (RPC) to deliver the message.</span></span> <span data-ttu-id="fe63e-138">Отправки почтовых ящиков подключается к базе данных почтовых ящиков, используя протокол RPC для получения сообщений и отправляет сообщения по протоколу SMTP для транспортной службы.</span><span class="sxs-lookup"><span data-stu-id="fe63e-138">Mailbox Transport Submission connects to the mailbox database using RPC to retrieve messages, and submits the messages via SMTP to the Transport service.</span></span>  <br/> |<span data-ttu-id="fe63e-139">Нет.</span><span class="sxs-lookup"><span data-stu-id="fe63e-139">None.</span></span>  <br/> |
   
### <a name="transport-events"></a><span data-ttu-id="fe63e-140">События транспорта</span><span class="sxs-lookup"><span data-stu-id="fe63e-140">Transport events</span></span>
<span data-ttu-id="fe63e-141"><a name="Events"> </a></span><span class="sxs-lookup"><span data-stu-id="fe63e-141"></span></span>

<span data-ttu-id="fe63e-142">Реализовать агенты транспорта, сначала Регистрация события, а затем — действие при включении этого события.</span><span class="sxs-lookup"><span data-stu-id="fe63e-142">You implement transport agents by first registering for an event, and then taking an action when that event fires.</span></span> <span data-ttu-id="fe63e-143">Каждый из типов три агента можно зарегистрировать для другой набор событий.</span><span class="sxs-lookup"><span data-stu-id="fe63e-143">Each of the three agent types can register for a different set of events.</span></span>
  
<span data-ttu-id="fe63e-144">На следующем рисунке показана where в транспортный конвейер транспорта, агенты можно регистрировать события.</span><span class="sxs-lookup"><span data-stu-id="fe63e-144">The following figure shows where in the transport pipeline transport agents can register for events.</span></span>
  
<span data-ttu-id="fe63e-145">**На рисунке 1. События транспорта**</span><span class="sxs-lookup"><span data-stu-id="fe63e-145">**Figure 1. Transport events**</span></span>

![Изображение, показывающее поток сообщений через конвейер транспорта и события, для которых может зарегистрироваться каждый агент, начиная с событий SMTP для агента SmtpReceivedAgent, событий категоризатора для агента RoutingAgent и заканчивая событиями доставки для агента DeliveryAgent.](media/TAConceptsFig1.png)
  
<span data-ttu-id="fe63e-147">При поступлении сообщения транспортный конвейер, производные от класса [SmtpReceiveAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) агента транспорта может выступать в окне сообщения во время события SMTP, агентов, зарегистрированных для.</span><span class="sxs-lookup"><span data-stu-id="fe63e-147">When a message enters the transport pipeline, a transport agent derived from the [SmtpReceiveAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) class can act on the message during any of the SMTP events that the agent registered for.</span></span> <span data-ttu-id="fe63e-148">Агент, производные от класса [RoutingAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) может выступать на любой из четырех классификатор событий, которые он был зарегистрирован для.</span><span class="sxs-lookup"><span data-stu-id="fe63e-148">An agent derived from the [RoutingAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) class can act on any of the four categorizer events that it has registered for.</span></span> <span data-ttu-id="fe63e-149">Агент, производные от класса [DeliveryAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) может выступать на сообщение во время доставки событий, которые он был зарегистрирован для.</span><span class="sxs-lookup"><span data-stu-id="fe63e-149">An agent derived from the [DeliveryAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) class can act on a message during any of the delivery events that it has registered for.</span></span> 
  
## <a name="transport-agents-and-server-roles"></a><span data-ttu-id="fe63e-150">Агенты транспорта и роли сервера</span><span class="sxs-lookup"><span data-stu-id="fe63e-150">Transport agents and server roles</span></span>
<span data-ttu-id="fe63e-151"><a name="ServerRoles"> </a></span><span class="sxs-lookup"><span data-stu-id="fe63e-151"></span></span>

<span data-ttu-id="fe63e-152">Изменения архитектуры роли сервера в Exchange 2013 влияют на агенты транспорта и что можно сделать агентов транспорта.</span><span class="sxs-lookup"><span data-stu-id="fe63e-152">Changes to the server role architecture in Exchange 2013 affect transport agents and what your transport agents can do.</span></span> <span data-ttu-id="fe63e-153">Exchange 2013 включает в себя следующие роли сервера:</span><span class="sxs-lookup"><span data-stu-id="fe63e-153">Exchange 2013 includes the following server roles:</span></span>
  
- <span data-ttu-id="fe63e-154">Сервер почтовых ящиков — протоколы включает в себя клиентского доступа, служба транспорта, базы данных почтовых ящиков и компоненты единой системы обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="fe63e-154">Mailbox server — Includes Client Access protocols, the Transport service, mailbox databases, and Unified Messaging components.</span></span> <span data-ttu-id="fe63e-155">Сервер почтовых ящиков взаимодействует непосредственно с помощью доменных служб Active Directory (AD DS), серверов клиентского доступа и почтовых клиентов, например Outlook.</span><span class="sxs-lookup"><span data-stu-id="fe63e-155">The Mailbox server communicates directly with Active Directory Domain Services (AD DS), Client Access servers, and mail clients such as Outlook.</span></span>
    
- <span data-ttu-id="fe63e-156">Сервер клиентского доступа — предоставляет проверки подлинности, только в режиме одобрения администратором, службы прокси-сервера и клиентского доступа протоколов, таких как HTTP, POP, IMAP и SMTP.</span><span class="sxs-lookup"><span data-stu-id="fe63e-156">Client Access server — Provides authentication, limited redirection, proxy services, and client access protocols such as HTTP, POP, IMAP, and SMTP.</span></span>
    
- <span data-ttu-id="fe63e-157">Пограничный транспортный сервер — маршрутов электронной почты, в и вне организации.</span><span class="sxs-lookup"><span data-stu-id="fe63e-157">Edge Transport server — Routes email into and out of an organization.</span></span> <span data-ttu-id="fe63e-158">Пограничные транспортные серверы обычно находятся в пограничной топологии Exchange.</span><span class="sxs-lookup"><span data-stu-id="fe63e-158">Edge Transport servers typically sit at the perimeter of an Exchange topology.</span></span>
    
<span data-ttu-id="fe63e-159">Эта структура консолидированной сокращает число серверов, необходимо развернуть в среде Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="fe63e-159">This consolidated structure reduces the number of servers that need to be deployed in an Exchange 2013 environment.</span></span> <span data-ttu-id="fe63e-160">Администраторы больше не нужно развертывать серверы клиентского доступа и транспортного сервера-концентратора в каждом сайте Active Directory, которая включает в себя на сервере почтовых ящиков, и они больше не требуется для обновления всех ролей сервера, чтобы воспользоваться преимуществами новых возможностей.</span><span class="sxs-lookup"><span data-stu-id="fe63e-160">Administrators no longer have to deploy Hub Transport and Client Access servers in every Active Directory site that includes a Mailbox server, and they no longer need to update all server roles in order to take advantage of new functionality.</span></span>
  
<span data-ttu-id="fe63e-161">Эти изменения в архитектуре роли сервера может повлиять на которых в конвейере агента может реагировать на события.</span><span class="sxs-lookup"><span data-stu-id="fe63e-161">These changes to the server role architecture can potentially affect where in the pipeline your agent can respond to events.</span></span> <span data-ttu-id="fe63e-162">При создании агенты транспорта для версии Exchange, предшествующие Exchange 2013, обязательно просмотрите архитектурные изменения, определите, нужно ли изменять агентов.</span><span class="sxs-lookup"><span data-stu-id="fe63e-162">If you have created transport agents for versions of Exchange earlier than Exchange 2013, be sure to review the architectural changes to determine whether you need to make any changes to your agents.</span></span>
  
<span data-ttu-id="fe63e-163">На следующем рисунке показана взаимосвязь архитектурные изменения в Exchange 2013 результатов в оптимальное и консолидированная транспортный конвейер.</span><span class="sxs-lookup"><span data-stu-id="fe63e-163">The following figure shows how the architectural changes in Exchange 2013 result in a streamlined, consolidated transport pipeline.</span></span> <span data-ttu-id="fe63e-164">На этом рисунке серверов клиентского доступа, помечаются как сервер клиентского доступа.</span><span class="sxs-lookup"><span data-stu-id="fe63e-164">In this figure, Client Access servers are labeled CAS.</span></span> <span data-ttu-id="fe63e-165">И серверы почтовых ящиков, помечаются как MBX.</span><span class="sxs-lookup"><span data-stu-id="fe63e-165">And Mailbox servers are labeled MBX.</span></span>
  
<span data-ttu-id="fe63e-166">**На рисунке 2. Архитектура роли сервера Exchange 2013**</span><span class="sxs-lookup"><span data-stu-id="fe63e-166">**Figure 2. Exchange 2013 server role architecture**</span></span>

![Изображение, показывающее, как трафик клиента через внешний брандмауэр и пограничный транспортный сервер (слева) проходит через балансировщик нагрузки четвертого слоя в консолидированный массив CAS и набор серверов почтовых ящиков в группе доступа к базе данных (справа).](media/Transport_Agent_Concepts_Fig_3.png)
  
<span data-ttu-id="fe63e-168">На следующем рисунке показана взаимодействие между ролями серверов Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="fe63e-168">The following figure shows the interactions between the Exchange 2013 server roles.</span></span>
  
<span data-ttu-id="fe63e-169">**На рисунке 3. Взаимодействие сервера почтовых ящиков и клиентского доступа**</span><span class="sxs-lookup"><span data-stu-id="fe63e-169">**Figure 3. Mailbox and Client Access server interactions**</span></span>

![Изображение, показывающее взаимодействие, начиная со стрелок от трафика клиента, проходящих через балансировщик нагрузки четвертого слоя, для которого на сервере клиентского доступа имеется 4 цели: IIS/HTTP-прокси, POP/IMAP, SMTP и UM. Стрелки указывают на соответствующие цели в хранилище почтовых ящиков.](media/Transport_Agent_Concepts_Fig_4.png)
  
<span data-ttu-id="fe63e-172">Дополнительные сведения об изменениях в архитектуре роли сервера Exchange 2013 можно [архитектура Exchange 2013](http://technet.microsoft.com/en-us/library/jj150540%28v=exchg.150%29.aspx#BKMK_Arch) в [новые возможности в Exchange 2013](http://technet.microsoft.com/en-us/library/jj150540%28v=exchg.150%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="fe63e-172">For more information about changes in the Exchange 2013 server role architecture, see [Exchange 2013 architecture](http://technet.microsoft.com/en-us/library/jj150540%28v=exchg.150%29.aspx#BKMK_Arch) in [What's New in Exchange 2013](http://technet.microsoft.com/en-us/library/jj150540%28v=exchg.150%29.aspx).</span></span> 
  
## <a name="transport-agent-classes"></a><span data-ttu-id="fe63e-173">Классы агента транспорта</span><span class="sxs-lookup"><span data-stu-id="fe63e-173">Transport agent classes</span></span>
<span data-ttu-id="fe63e-174"><a name="Create"> </a></span><span class="sxs-lookup"><span data-stu-id="fe63e-174"></span></span>

<span data-ttu-id="fe63e-175">Класс, который наследует агента транспорта определяет события, для которых можно регистрировать агентом.</span><span class="sxs-lookup"><span data-stu-id="fe63e-175">The class your transport agent derives from determines the events for which your agent can register.</span></span> <span data-ttu-id="fe63e-176">Агента обычно будет содержать класс агентов, фабрика агентов, один или несколько обработчиков событий и код, который выполняет действия, которые будут агента вступило в.</span><span class="sxs-lookup"><span data-stu-id="fe63e-176">Your agent will typically contain an agent class, an agent factory, one or more event handlers, and the code that performs the actions that you want your agent to take.</span></span>
  
<span data-ttu-id="fe63e-177">В следующей таблице перечислены классы, из которых формируется для каждого типа агента.</span><span class="sxs-lookup"><span data-stu-id="fe63e-177">The following table lists the classes from which to derive for each agent type.</span></span>
  
<span data-ttu-id="fe63e-178">**В таблице 2. Классы агента**</span><span class="sxs-lookup"><span data-stu-id="fe63e-178">**Table 2. Agent classes**</span></span>

||||
|:-----|:-----|:-----|
|<span data-ttu-id="fe63e-179">Тип агента</span><span class="sxs-lookup"><span data-stu-id="fe63e-179">Agent type</span></span>  <br/> |<span data-ttu-id="fe63e-180">Базовый класс фабрики</span><span class="sxs-lookup"><span data-stu-id="fe63e-180">Factory base class</span></span>  <br/> |<span data-ttu-id="fe63e-181">Базовый класс агентов</span><span class="sxs-lookup"><span data-stu-id="fe63e-181">Agent base class</span></span>  <br/> |
|<span data-ttu-id="fe63e-182">Получения SMTP</span><span class="sxs-lookup"><span data-stu-id="fe63e-182">SMTP receive</span></span>  <br/> |[<span data-ttu-id="fe63e-183">SmtpReceiveAgentFactory</span><span class="sxs-lookup"><span data-stu-id="fe63e-183">SmtpReceiveAgentFactory</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgentFactory.aspx) <br/> |[<span data-ttu-id="fe63e-184">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="fe63e-184">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> |
|<span data-ttu-id="fe63e-185">Маршрутизация</span><span class="sxs-lookup"><span data-stu-id="fe63e-185">Routing</span></span>  <br/> |[<span data-ttu-id="fe63e-186">RoutingAgentFactory</span><span class="sxs-lookup"><span data-stu-id="fe63e-186">RoutingAgentFactory</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgentFactory.aspx) <br/> |[<span data-ttu-id="fe63e-187">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="fe63e-187">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) <br/> |
|<span data-ttu-id="fe63e-188">Доставки</span><span class="sxs-lookup"><span data-stu-id="fe63e-188">Delivery</span></span>  <br/> |[<span data-ttu-id="fe63e-189">DeliveryAgentFactory\<Manager\></span><span class="sxs-lookup"><span data-stu-id="fe63e-189">DeliveryAgentFactory\<Manager\></span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgentFactory`1.aspx) <br/> |[<span data-ttu-id="fe63e-190">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="fe63e-190">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) <br/> |
   
<span data-ttu-id="fe63e-191">Эти фабрики и агент базовые классы предоставляют свойства и методы, которые можно использовать для доступа к транспорта события и сообщения.</span><span class="sxs-lookup"><span data-stu-id="fe63e-191">These factory and agent base classes provide properties and methods that you can use to access transport events and messages.</span></span> <span data-ttu-id="fe63e-192">Реализация классов в агента, производные от этих классов.</span><span class="sxs-lookup"><span data-stu-id="fe63e-192">Implement classes in your agent that inherit from these classes.</span></span> <span data-ttu-id="fe63e-193">В классе фабрики производные агента переопределение метода **CreateAgent** , чтобы он возвращает новый экземпляр класса агента.</span><span class="sxs-lookup"><span data-stu-id="fe63e-193">In the agent factory derived class, override the **CreateAgent** method so that it returns a new instance of your agent class.</span></span> 
  
<span data-ttu-id="fe63e-194">Аргументы, передаваемые в события может содержать экземпляр класса [EmailMessage](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Email.EmailMessage.aspx) , который можно использовать для изменения свойства и содержимое базового сообщения.</span><span class="sxs-lookup"><span data-stu-id="fe63e-194">Arguments passed to the events can contain an instance of the [EmailMessage](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Email.EmailMessage.aspx) class, which you can use to change the properties and contents of the underlying message.</span></span> <span data-ttu-id="fe63e-195">Не все сообщения в каждом событии.</span><span class="sxs-lookup"><span data-stu-id="fe63e-195">Not all message information is available in each event.</span></span> <span data-ttu-id="fe63e-196">Необходимо определить, какие агента и какие события лучше всего подходит для задач, которые необходимо выполнить.</span><span class="sxs-lookup"><span data-stu-id="fe63e-196">You must determine which agent and which event is best for the task you want to accomplish.</span></span> 
  
<span data-ttu-id="fe63e-197">Следующие пространства имен содержат типы, которые можно использовать для чтения, записи и изменения сообщений в транспортный конвейер:</span><span class="sxs-lookup"><span data-stu-id="fe63e-197">The following namespaces contain types that you can use to read, write, and modify messages in the transport pipeline:</span></span>
  
- [<span data-ttu-id="fe63e-198">Microsoft.Exchange.Data.Mime.Encoders</span><span class="sxs-lookup"><span data-stu-id="fe63e-198">Microsoft.Exchange.Data.Mime.Encoders</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Mime.Encoders.aspx)
    
- [<span data-ttu-id="fe63e-199">Microsoft.Exchange.Data.ContentTypes.iCalendar</span><span class="sxs-lookup"><span data-stu-id="fe63e-199">Microsoft.Exchange.Data.ContentTypes.iCalendar</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.iCalendar.aspx)
    
- [<span data-ttu-id="fe63e-200">Microsoft.Exchange.Data.Mime</span><span class="sxs-lookup"><span data-stu-id="fe63e-200">Microsoft.Exchange.Data.Mime</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Mime.aspx)
    
- [<span data-ttu-id="fe63e-201">Microsoft.Exchange.Data.ContentTypes.Tnef</span><span class="sxs-lookup"><span data-stu-id="fe63e-201">Microsoft.Exchange.Data.ContentTypes.Tnef</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.Tnef.aspx)
    
- [<span data-ttu-id="fe63e-202">Microsoft.Exchange.Data.ContentTypes.vCard</span><span class="sxs-lookup"><span data-stu-id="fe63e-202">Microsoft.Exchange.Data.ContentTypes.vCard</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.vCard.aspx)
    
<span data-ttu-id="fe63e-203">После того, как записать агента транспорта, вы [Установка и управление ими агента](http://technet.microsoft.com/en-us/library/bb125175%28v=exchg.150%29.aspx) с помощью командной консоли Exchange.</span><span class="sxs-lookup"><span data-stu-id="fe63e-203">After you write your transport agent, you [install and manage your agent](http://technet.microsoft.com/en-us/library/bb125175%28v=exchg.150%29.aspx) by using the Exchange Management Shell.</span></span> <span data-ttu-id="fe63e-204">Дополнительные сведения содержатся в разделе [Создание агенты транспорта для Exchange 2013](creating-transport-agents-for-exchange-2013.md).</span><span class="sxs-lookup"><span data-stu-id="fe63e-204">For more information, see [Creating transport agents for Exchange 2013](creating-transport-agents-for-exchange-2013.md).</span></span> 
  
## <a name="see-also"></a><span data-ttu-id="fe63e-205">См. также</span><span class="sxs-lookup"><span data-stu-id="fe63e-205">See also</span></span>

- [<span data-ttu-id="fe63e-206">Агенты транспорта в Exchange</span><span class="sxs-lookup"><span data-stu-id="fe63e-206">Transport agents in Exchange</span></span>](transport-agents-in-exchange-2013.md)    
- [<span data-ttu-id="fe63e-207">Справочник по агента транспорта для Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="fe63e-207">Transport agent reference for Exchange 2013</span></span>](transport-agent-reference-for-exchange-2013.md)   
- [<span data-ttu-id="fe63e-208">Чтение и изменение сообщений в транспортный конвейер Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="fe63e-208">Reading and modifying messages in the Exchange 2013 transport pipeline</span></span>](reading-and-modifying-messages-in-the-exchange-2013-transport-pipeline.md)    
- [<span data-ttu-id="fe63e-209">Новые возможности Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="fe63e-209">What's New in Exchange 2013</span></span>](http://technet.microsoft.com/en-us/library/jj150540%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="fe63e-210">Архитектура роли сервера Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="fe63e-210">Exchange 2013 Server Role Architecture</span></span>](http://blogs.technet.com/b/exchange/archive/2013/01/23/exchange-2013-server-role-architecture.aspx)    
- [<span data-ttu-id="fe63e-211">Почтовый ящик и серверов клиентского доступа</span><span class="sxs-lookup"><span data-stu-id="fe63e-211">Mailbox and Client Access Servers</span></span>](http://technet.microsoft.com/en-us/library/jj150519%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="fe63e-212">Поток почты Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="fe63e-212">Exchange Server 2013 Mail Flow</span></span>](http://technet.microsoft.com/en-us/library/aa996349.aspx)
- [<span data-ttu-id="fe63e-213">Маршрутизация почты 2013 сервера Exchange</span><span class="sxs-lookup"><span data-stu-id="fe63e-213">Exchange Server 2013 Mail Routing</span></span>](http://technet.microsoft.com/en-us/library/aa998825%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="fe63e-214">Exchange Server PowerShell (Командная консоль Exchange)</span><span class="sxs-lookup"><span data-stu-id="fe63e-214">Exchange Server PowerShell (Exchange Management Shell)</span></span>](https://docs.microsoft.com/en-us/powershell/exchange/exchange-server/exchange-management-shell?view=exchange-ps)
    

