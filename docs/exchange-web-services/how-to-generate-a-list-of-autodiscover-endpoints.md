---
title: Создание списка конечных точек автообнаружения
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: 82394d3c-9fc7-4b3c-b48d-1fe983c198f7
description: Узнайте, как создать приоритетный список конечных точек автообнаружения.
ms.openlocfilehash: ccecacc9c8beef464727efbc9d1fced7a81f9b7c
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/25/2018
ms.locfileid: "19761016"
---
# <a name="generate-a-list-of-autodiscover-endpoints"></a>Создание списка конечных точек автообнаружения

Узнайте, как создать приоритетный список конечных точек автообнаружения.
  
Первая задача [процесса автообнаружения](autodiscover-for-exchange.md) — создание списка конечных точек автообнаружения приложения для попытки. Эти конечные точки автообнаружения могут быть получены из [поиска SCP](how-to-find-autodiscover-endpoints-by-using-scp-lookup-in-exchange.md) или могут быть получены из адреса электронной почты пользователя. В конце вы можете создать большое количество конечных точек. Давайте посмотрим, как можно упорядочивать их по приоритету. 
  
## <a name="start-with-scp-lookup"></a>Начало поиска SCP
<a name="bk_StartWithScp"> </a>

Конечные точки автообнаружения, поступающие из [поиска SCP](how-to-find-autodiscover-endpoints-by-using-scp-lookup-in-exchange.md) , должны иметь наивысший приоритет в списке. Администраторы могут настроить объекты SCP для маршрутизации клиента в ближайшую или наиболее эффективную конечную точку автообнаружения, поэтому рекомендуется начать с этих конечных точек. Так как процесс поиска SCP имеет собственную схему определения приоритетов, результаты поиска SCP уже имеют приоритет, как показано ниже. 
  
1. Конечные точки автообнаружения из объектов SCP заменяются на сайт Active Directory, к которому относится клиентский компьютер.
    
2. Конечные точки автообнаружения из объектов SCP не ограничены ни одним сайтом Active Directory.
    
3. Конечные точки автообнаружения из объектов SCP заменяются на другой сайт Active Directory, чем сайт, к которому принадлежит клиентский компьютер.
    
После получения результатов процедуры поиска SCP можно добавить конечные точки, производные от адреса электронной почты пользователя. Они могут использоваться в качестве набора конечных точек по умолчанию и резервного варианта в случае отсутствия результатов SCP или конечных точек, возвращенных из поиска SCP, недостаточно.
  
## <a name="add-endpoints-derived-from-the-users-email-address"></a>Добавление конечных точек, производных от адреса электронной почты пользователя
<a name="bk_AddDerivedEndpoints"> </a>

Если поиск SCP не работает или конечные точки, возвращенные функцией поиска SCP, не возвращают успешный ответ, можно получить набор конечных точек автообнаружения по умолчанию из адреса электронной почты пользователя. Эти конечные точки должны иметь более низкий приоритет, чем все, которые берутся из поиска SCP, но они могут понадобиться, если не удалось выполнить поиск SCP.
  
### <a name="to-derive-autodiscover-endpoints"></a>Получение конечных точек автообнаружения

1. Извлеките имя домена из адреса электронной почты пользователя. Например, если адрес электронной почты пользователя — Sadie.Daniels@contoso.com, доменное имя будет contoso.com.
    
2. Создание URL-адресов конечных точек без расширений файлов в следующих форматах:
    
  - "https://" + домен + "/Autodiscover/Autodiscover"
    
  - "https://autodiscover." + домен + "/Autodiscover/Autodiscover"
    
После компиляции списка URL-адресов конечной точки, которые являются производными от поиска SCP и электронного адреса пользователя, может потребоваться изменить расширения имен файлов в этих URL-адресах в зависимости от того, используется ли [веб-служба автообнаружения SOAP](http://msdn.microsoft.com/library/61c21ea9-7fea-4f56-8ada-bf80e1e6b074%28Office.15%29.aspx) или [веб-служба автообнаружения POX](http://msdn.microsoft.com/library/877152f0-f4b1-4f63-b2ce-924f4bdf2d20%28Office.15%29.aspx).
  
## <a name="add-or-replace-file-name-extensions-in-endpoint-urls"></a>Добавление или замена расширений имен файлов в URL-адресах конечной точки
<a name="bk_FileExtensions"> </a>

Доступ к службе автообнаружения можно получить с помощью веб-службы автообнаружения SOAP или веб-службы автообнаружения POX. Каждая служба использует похожие URL-адреса конечной точки, единственное отличие от расширения имени файла. Веб-служба автообнаружения SOAP использует расширение имени файла SVC, а веб-служба автообнаружения POX использует расширение имени файла ". XML".
  
По умолчанию URL-адреса конечных точек автообнаружения, возвращенные из поиска SCP, являются URL-адресами POX. Однако при использовании автообнаружения SOAP можно просто изменить расширение имени файла с ". XML" на SVC и попробовать SOAP-запрос.
  
Для URL-адресов конечной точки автообнаружения расширение файла не указывается. Добавьте соответствующее расширение файла для веб-службы автообнаружения, которую вы используете, прежде чем пытаться использовать URL-адрес.
  
## <a name="example-generating-a-list-of-autodiscover-endpoints"></a>Пример: Создание списка конечных точек автообнаружения
<a name="bk_Example"> </a>

Давайте рассмотрим пример. Ольга Даниелс (Sadie.Daniels@contoso.com) в первый раз использует приложение веб-служб Exchange (EWS). Приложение использует службу автообнаружения для настройки. Компьютер Ольга присоединен к домену contoso.com и находится на сайте Redmond Active Directory. Приложение создает список конечных точек автообнаружения, показанный на рисунке 1.
  
**Рисунок 1: пример списка конечных точек автообнаружения**

![Пример списка конечных точек службы автообнаружения, где конечные точки, полученные с помощью поиска SCP, имеют более высокий приоритет, чем производные конечные точки.](media/Ex15_Autodiscover_GenerateList_Example.png)
  
В этом примере приложение EWS предпочитает веб-службу автообнаружения SOAP, поэтому перед отправкой SOAP-запросов в службу обнаружения имен файлов для точки подключения к этой службе изменяется расширение имени файла.
  
## <a name="next-steps"></a>Дальнейшие действия
<a name="bk_NextSteps"> </a>

После создания списка конечных точек автообнаружения попробуйте [отправить запросы на эти конечные точки](how-to-get-user-settings-from-exchange-by-using-autodiscover.md).
  
## <a name="see-also"></a>См. также


- [Автообнаружение в Exchange](autodiscover-for-exchange.md)
    
- [Обнаружение конечных точек автообнаружения с помощью поиска SCP в Exchange](how-to-find-autodiscover-endpoints-by-using-scp-lookup-in-exchange.md)
    
- [Обработка сообщений об ошибках службы автообнаружения](handling-autodiscover-error-messages.md)
    

