---
title: Основные понятия резервного копирования и восстановления для Exchange 2013
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 9a1c4709-9313-4ccf-9f8a-673a51d51f23
description: Найдите сведения о базах данных Exchange, которые помогут вам создать приложения резервного копирования и восстановления для Exchange 2013.
ms.openlocfilehash: fd35699839af105dd3fe285776b071c1d03d58dd
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2020
ms.locfileid: "44437986"
---
# <a name="backup-and-restore-concepts-for-exchange-2013"></a><span data-ttu-id="0cf61-103">Основные понятия резервного копирования и восстановления для Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="0cf61-103">Backup and restore concepts for Exchange 2013</span></span>

<span data-ttu-id="0cf61-104">Найдите сведения о базах данных Exchange, которые помогут вам создать приложения резервного копирования и восстановления для Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="0cf61-104">Find information about Exchange databases that will help you create your backup and restore applications for Exchange 2013.</span></span>
  
<span data-ttu-id="0cf61-105">Перед созданием приложений для резервного копирования и восстановления для Exchange Server 2013 необходимо ознакомиться со структурой файлов базы данных Exchange.</span><span class="sxs-lookup"><span data-stu-id="0cf61-105">Before you create backup and restore applications for Exchange Server 2013, you should be familiar with the Exchange database file structure.</span></span> <span data-ttu-id="0cf61-106">С помощью файлов базы данных хранилища Exchange можно создавать резервные копии данных в хранилище и восстанавливать их позднее при необходимости.</span><span class="sxs-lookup"><span data-stu-id="0cf61-106">By using the Exchange store database files, you can back up the data in your store and restore it at a later time as needed.</span></span> <span data-ttu-id="0cf61-107">Если свободное место на диске ограничено, администратор может реализовать циклическое ведение журнала, и это повлияет на возможность резервного копирования базы данных.</span><span class="sxs-lookup"><span data-stu-id="0cf61-107">If you are limited on disk space, your administrator might implement circular logging, and this will affect your ability to back up the database.</span></span> <span data-ttu-id="0cf61-108">Вы также можете воспользоваться функцией мобильности баз данных в Exchange 2013 для резервного копирования и восстановления данных Exchange.</span><span class="sxs-lookup"><span data-stu-id="0cf61-108">You can also take advantage of the database mobility feature in Exchange 2013 to back up and restore Exchange data.</span></span> <span data-ttu-id="0cf61-109">Мобильность баз данных в сочетании с приложением резервного копирования и восстановления является хорошим показателем избыточности для аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="0cf61-109">Database mobility, in combination with your backup and restore application, is a good measure of redundancy for disaster recovery.</span></span>

<span data-ttu-id="0cf61-110"><a name="bk_exchangedatabases"> </a></span><span class="sxs-lookup"><span data-stu-id="0cf61-110"><a name="bk_exchangedatabases"> </a></span></span>

## <a name="exchange-store-database-files"></a><span data-ttu-id="0cf61-111">Файлы базы данных хранилища Exchange</span><span class="sxs-lookup"><span data-stu-id="0cf61-111">Exchange store database files</span></span>

<span data-ttu-id="0cf61-112">Exchange 2013 включает поддержку до 100 баз данных.</span><span class="sxs-lookup"><span data-stu-id="0cf61-112">Exchange 2013 includes support for up to 100 databases.</span></span> <span data-ttu-id="0cf61-113">В каждой базе данных Exchange 2013 содержатся файлы, перечисленные в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="0cf61-113">Each Exchange 2013 database contains the files listed in the following table.</span></span> 
  
<span data-ttu-id="0cf61-114">**Таблица 1. Файлы базы данных Exchange 2013**</span><span class="sxs-lookup"><span data-stu-id="0cf61-114">**Table 1. Exchange 2013 database files**</span></span>

|<span data-ttu-id="0cf61-115">Тип файла</span><span class="sxs-lookup"><span data-stu-id="0cf61-115">File type</span></span>|<span data-ttu-id="0cf61-116">Расширение</span><span class="sxs-lookup"><span data-stu-id="0cf61-116">Extension</span></span>|<span data-ttu-id="0cf61-117">Description</span><span class="sxs-lookup"><span data-stu-id="0cf61-117">Description</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="0cf61-118">Файл базы данных</span><span class="sxs-lookup"><span data-stu-id="0cf61-118">Database file</span></span>  <br/> |<span data-ttu-id="0cf61-119">\*EDB</span><span class="sxs-lookup"><span data-stu-id="0cf61-119">\*.edb</span></span>  <br/> |<span data-ttu-id="0cf61-120">Записывает все изменения, которые были зафиксированы в базе данных в памяти.</span><span class="sxs-lookup"><span data-stu-id="0cf61-120">Records all the changes that have been committed to the in-memory database.</span></span>  <br/> |
|<span data-ttu-id="0cf61-121">Поток журнала транзакций</span><span class="sxs-lookup"><span data-stu-id="0cf61-121">Transaction log stream</span></span>  <br/> |<span data-ttu-id="0cf61-122">\*. log</span><span class="sxs-lookup"><span data-stu-id="0cf61-122">\*.log</span></span>  <br/> |<span data-ttu-id="0cf61-123">Записывает операции, такие как создание или изменение сообщения, которые будут зафиксированы в базе данных.</span><span class="sxs-lookup"><span data-stu-id="0cf61-123">Records operations, such as the creation or modification of a message, that will be committed to the database.</span></span> <span data-ttu-id="0cf61-124">Размер каждого из них ограничен на 1 МБ.</span><span class="sxs-lookup"><span data-stu-id="0cf61-124">Limited in size to 1 MB each.</span></span>  <br/> |
|<span data-ttu-id="0cf61-125">Файл контрольных точек</span><span class="sxs-lookup"><span data-stu-id="0cf61-125">Checkpoint file</span></span>  <br/> |<span data-ttu-id="0cf61-126">\*CHK</span><span class="sxs-lookup"><span data-stu-id="0cf61-126">\*.chk</span></span>  <br/> |<span data-ttu-id="0cf61-127">Записи, в которых записаны транзакции, записанные в файлы базы данных на диске.</span><span class="sxs-lookup"><span data-stu-id="0cf61-127">Records which logged transactions have been written to the on-disk database files.</span></span>  <br/> |
   
<span data-ttu-id="0cf61-128">Exchange 2013 поддерживает единый набор файлов журналов транзакций для каждой базы данных.</span><span class="sxs-lookup"><span data-stu-id="0cf61-128">Exchange 2013 maintains a single set of transaction log files for each database.</span></span> <span data-ttu-id="0cf61-129">Журналы транзакций важны для операций резервного копирования и восстановления.</span><span class="sxs-lookup"><span data-stu-id="0cf61-129">The transaction logs are important for backup and recovery operations.</span></span> <span data-ttu-id="0cf61-130">При создании приложения для резервного копирования и восстановления, использующего службу теневого копирования томов (VSS), необходимо убедиться, что эти журналы обрабатываются правильно.</span><span class="sxs-lookup"><span data-stu-id="0cf61-130">When you create a backup and restore application that uses the Volume Shadow Copy Service (VSS), you must ensure that you handle these logs correctly.</span></span> <span data-ttu-id="0cf61-131">Дополнительные сведения см. [в статье журналы транзакций и файлы контрольных точек для резервного копирования и восстановления в Exchange 2013](transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange.md).</span><span class="sxs-lookup"><span data-stu-id="0cf61-131">For more information, see [Transaction logs and checkpoint files for backup and restore in Exchange 2013](transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange.md).</span></span> <span data-ttu-id="0cf61-132">Для резервного копирования базы данных и ее потока журнала необходимо выполнить резервное копирование всего тома, содержащего базу данных и журналы.</span><span class="sxs-lookup"><span data-stu-id="0cf61-132">To back up a database and its log stream, you must back up the entire volume that contains the database and logs.</span></span> <span data-ttu-id="0cf61-133">Усечение журнала выполняется только после успешного завершения полной резервной копии тома или папок, содержащих базу данных Exchange.</span><span class="sxs-lookup"><span data-stu-id="0cf61-133">Log truncation will occur only after a successful completion of a full backup of a volume or folders that contain an Exchange database.</span></span>
  
<span data-ttu-id="0cf61-134">На каждом сервере Exchange Server одновременно можно подключить только одну базу данных восстановления.</span><span class="sxs-lookup"><span data-stu-id="0cf61-134">On each Exchange server, you can mount only one recovery database at a time.</span></span> <span data-ttu-id="0cf61-135">Доступ к базе данных восстановления можно получить с помощью командлетов командной консоли Exchange, например **New — MailboxRestoreRequest**.</span><span class="sxs-lookup"><span data-stu-id="0cf61-135">You can access the recovery database by using Exchange Management Shell cmdlets such as **New-MailboxRestoreRequest**.</span></span> <span data-ttu-id="0cf61-136">Дополнительные сведения о базах данных восстановления Exchange можно найти в статье [базы данных восстановления](https://technet.microsoft.com/library/dd876954%28v=exchg.150%29.aspx) на сайте TechNet.</span><span class="sxs-lookup"><span data-stu-id="0cf61-136">For more information about Exchange recovery databases, see [Recovery Databases](https://technet.microsoft.com/library/dd876954%28v=exchg.150%29.aspx) on TechNet.</span></span> <span data-ttu-id="0cf61-137">Дополнительные сведения об командлетах командной консоли Exchange приведены в статье [командлеты exchange 2013](https://technet.microsoft.com/library/bb124413.aspx) на сайте TechNet.</span><span class="sxs-lookup"><span data-stu-id="0cf61-137">For more information about Exchange Management Shell cmdlets, see [Exchange 2013 Cmdlets](https://technet.microsoft.com/library/bb124413.aspx) on TechNet.</span></span> 
  
## <a name="circular-logging"></a><span data-ttu-id="0cf61-138">Циклическое ведение журнала</span><span class="sxs-lookup"><span data-stu-id="0cf61-138">Circular logging</span></span>
<span data-ttu-id="0cf61-139"><a name="bk_circularlogging"> </a></span><span class="sxs-lookup"><span data-stu-id="0cf61-139"><a name="bk_circularlogging"> </a></span></span>

<span data-ttu-id="0cf61-140">Если в емкости хранилища возникла ошибка, администратор может включить циклическое ведение журнала.</span><span class="sxs-lookup"><span data-stu-id="0cf61-140">If storage capacity is an issue, your administrator might enable circular logging.</span></span> <span data-ttu-id="0cf61-141">Когда циклическое ведение журнала включено, Exchange записывает журналы транзакций как обычно, но если файл контрольной точки является дополнительным, неактивная часть журнала транзакций усекается.</span><span class="sxs-lookup"><span data-stu-id="0cf61-141">When circular logging is enabled, Exchange writes transaction logs as usual, but when a checkpoint file is advanced, the inactive portion of the transaction log is truncated.</span></span> <span data-ttu-id="0cf61-142">Администратор не должен настраивать базы данных Exchange 2013 для использования циклического ведения журнала, если вы также планируете использовать VSS для поддержки пользовательских операций резервного копирования и восстановления.</span><span class="sxs-lookup"><span data-stu-id="0cf61-142">Your administrator should not configure Exchange 2013 databases to use circular logging if you also plan to use VSS to enable your custom backup and restore operations.</span></span> <span data-ttu-id="0cf61-143">Циклическое ведение журнала создает следующие ограничения:</span><span class="sxs-lookup"><span data-stu-id="0cf61-143">Circular logging creates the following restrictions:</span></span> 
  
- <span data-ttu-id="0cf61-144">Если эта функция включена во время операции резервного копирования или восстановления, восстановление отдельных баз данных невозможно.</span><span class="sxs-lookup"><span data-stu-id="0cf61-144">If enabled during the backup operation or the recovery operation, you cannot restore individual databases.</span></span>
    
- <span data-ttu-id="0cf61-145">Возможны только операции восстановления на момент времени.</span><span class="sxs-lookup"><span data-stu-id="0cf61-145">Only point-in-time recovery operations are possible.</span></span> <span data-ttu-id="0cf61-146">Когда циклическое ведение журнала включено, вы можете удалять журналы транзакций в том же каталоге при восстановлении базы данных, хотя эти журналы могут быть частью другой базы данных Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="0cf61-146">When circular logging is enabled, you can delete transaction logs in the same directory when a database is restored, although those logs might be part of a different Exchange 2013 database.</span></span> 
    
- <span data-ttu-id="0cf61-147">Добавочные и разностные операции резервного копирования выполнить невозможно.</span><span class="sxs-lookup"><span data-stu-id="0cf61-147">You cannot perform incremental or differential backup operations.</span></span> <span data-ttu-id="0cf61-148">Дополнительные сведения об этих типах резервных копий приведены в статье [типы операций резервного копирования для Exchange 2013](types-of-backup-operations-for-exchange-2013.md).</span><span class="sxs-lookup"><span data-stu-id="0cf61-148">For more information about these types of backups, see [Types of backup operations for Exchange 2013](types-of-backup-operations-for-exchange-2013.md).</span></span>
    
<span data-ttu-id="0cf61-149">Если включено циклическое ведение журнала, администратор должен как можно скорее отключить его, чтобы избежать отказа в резервных копиях VSS.</span><span class="sxs-lookup"><span data-stu-id="0cf61-149">If circular logging is enables, your administrator should disable it as soon as possible to ensure that your VSS backups don't fail.</span></span> <span data-ttu-id="0cf61-150">Дополнительные сведения см. в разделе [циклическое ведение журнала Exchange и резервное копирование VSS](https://blogs.technet.com/b/exchange/archive/2010/08/18/3410672.aspx).</span><span class="sxs-lookup"><span data-stu-id="0cf61-150">For more information, check out the blog post [Exchange Circular Logging and VSS Backups](https://blogs.technet.com/b/exchange/archive/2010/08/18/3410672.aspx).</span></span> 
  
## <a name="exchange-database-mobility"></a><span data-ttu-id="0cf61-151">Мобильность базы данных Exchange</span><span class="sxs-lookup"><span data-stu-id="0cf61-151">Exchange database mobility</span></span>
<span data-ttu-id="0cf61-152"><a name="bk_exchangedatabasemobility"> </a></span><span class="sxs-lookup"><span data-stu-id="0cf61-152"><a name="bk_exchangedatabasemobility"> </a></span></span>

<span data-ttu-id="0cf61-153">Exchange 2013 обеспечивает мобильность базы данных для повышения надежности и доступности почтовых ящиков.</span><span class="sxs-lookup"><span data-stu-id="0cf61-153">Exchange 2013 allows for database mobility to improve mailbox reliability and availability.</span></span> <span data-ttu-id="0cf61-154">Мобильность баз данных позволяет создавать копии базы данных хранилища Exchange, отключать базу данных от сервера и хранить ее на другом сервере.</span><span class="sxs-lookup"><span data-stu-id="0cf61-154">Database mobility enables you to make copies of your Exchange store database, disconnect the database from the server, and store it on another server.</span></span> <span data-ttu-id="0cf61-155">В группе обеспечения доступности баз данных Exchange 2013 (DAG) несколько копий базы данных хранятся на разных компьютерах.</span><span class="sxs-lookup"><span data-stu-id="0cf61-155">In an Exchange 2013 Database Availability Group (DAG), multiple copies of the database are stored on different computers.</span></span> <span data-ttu-id="0cf61-156">Когда одна или несколько копий базы данных теряются из-за аппаратного или иного сбоя системы, сведения из других копий можно использовать для повторного заполнения базы данных с помощью обычных операций репликации.</span><span class="sxs-lookup"><span data-stu-id="0cf61-156">When one or more copies of the database are lost due to hardware or other system failure, information from the other copies can be used to reseed the database via normal replication operations.</span></span>
  
<span data-ttu-id="0cf61-157">Для операций резервного копирования, если базы данных Exchange 2013, которые необходимо архивировать, настроены в группе DAG, приложение резервного копирования может лучше предотвратить помехи между снимком и производительностью активного сервера, отменив моментальный снимок одной из неактивных копий базы данных.</span><span class="sxs-lookup"><span data-stu-id="0cf61-157">For backup operations, if the Exchange 2013 databases that are to be backed up are configured in a DAG, the backup application can better prevent interference between the snapshot and the active server's performance by taking the snapshot on one of the inactive database copies.</span></span> <span data-ttu-id="0cf61-158">Так как копии базы данных для большей части синхронизированы, приложение резервного копирования может создавать моментальные снимки из разных копий базы данных, а затем заново воссоздать их из частей.</span><span class="sxs-lookup"><span data-stu-id="0cf61-158">Because the database copies are for the most part synchronized, the backup application can take snapshots from different copies of the database, and later reconstruct it from the pieces.</span></span>
  
<span data-ttu-id="0cf61-159">Единственный поддерживаемый метод восстановления баз данных DAG из резервных данных — восстановление всех копий базы данных с использованием одних и тех же архивных данных.</span><span class="sxs-lookup"><span data-stu-id="0cf61-159">The only supported method of restoring DAG databases from backup data is to restore all copies of the database by using the same backup data.</span></span> <span data-ttu-id="0cf61-160">Так как файлы журнала базы данных могут слегка отличаться между копиями, восстановление отдельных копий базы данных с использованием разных данных может привести к тому, что база данных станет недоступна.</span><span class="sxs-lookup"><span data-stu-id="0cf61-160">Because the database log files might be slightly different between the copies, restoring individual database copies using different data can cause the database to become unmountable.</span></span>
  
## <a name="in-this-section"></a><span data-ttu-id="0cf61-161">В этой статье</span><span class="sxs-lookup"><span data-stu-id="0cf61-161">In this section</span></span>
<span data-ttu-id="0cf61-162"><a name="bk_inthissection"> </a></span><span class="sxs-lookup"><span data-stu-id="0cf61-162"><a name="bk_inthissection"> </a></span></span>

- [<span data-ttu-id="0cf61-163">Журналы транзакций и файлы контрольных точек для резервного копирования и восстановления в Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="0cf61-163">Transaction logs and checkpoint files for backup and restore in Exchange 2013</span></span>](transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange.md)
    
- [<span data-ttu-id="0cf61-164">Модуль записи Exchange в Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="0cf61-164">Exchange writer in Exchange 2013</span></span>](exchange-writer-in-exchange-2013.md)
    
## <a name="see-also"></a><span data-ttu-id="0cf61-165">См. также</span><span class="sxs-lookup"><span data-stu-id="0cf61-165">See also</span></span>

- [<span data-ttu-id="0cf61-166">Разработки для Exchange Online и Exchange</span><span class="sxs-lookup"><span data-stu-id="0cf61-166">Exchange Online and Exchange development</span></span>](../exchange-server-development.md) 
- [<span data-ttu-id="0cf61-167">Типы операций резервного копирования для Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="0cf61-167">Types of backup operations for Exchange 2013</span></span>](types-of-backup-operations-for-exchange-2013.md)
- [<span data-ttu-id="0cf61-168">Восстановление баз данных Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="0cf61-168">Restoring Exchange 2013 databases</span></span>](restoring-exchange-2013-databases.md)
    

