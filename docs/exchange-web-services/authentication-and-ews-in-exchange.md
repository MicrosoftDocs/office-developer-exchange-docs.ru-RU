---
title: Проверка подлинности и EWS в Exchange
manager: sethgros
ms.date: 03/9/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: 9a83df96-aca0-42b3-b8f5-2b414f0363f1
description: Сведения о том, как правильно выбрать стандарт проверки подлинности приложения веб-служб Exchange, предназначенного для Exchange.
ms.openlocfilehash: a4aae4678f1d6ffa5c08350f0bcccce5a4885f20
ms.sourcegitcommit: 9061fcf40c218ebe88911783f357b7df278846db
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/28/2018
ms.locfileid: "21353667"
---
# <a name="authentication-and-ews-in-exchange"></a>Проверка подлинности и EWS в Exchange

Сведения о том, как правильно выбрать стандарт проверки подлинности приложения веб-служб Exchange, предназначенного для Exchange.
  
Проверка подлинности — это ключевая составляющая приложения веб-служб Exchange. Exchange Online, Exchange Online в составе Office 365, а также локальные версии Exchange, начиная с Exchange Server 2013, поддерживают стандартные протоколы проверки подлинности в Интернете для защиты обмена данными между вашим приложением и сервером Exchange Server.
  
В случае с Exchange Online нужно выбрать способ проверки подлинности, при котором используется протокол HTTPS для шифрования запросов и откликов, которые отправляет ваше приложение. Хотя использование протокола HTTP для локальных серверов Exchange допустимо, рекомендуем применять протокол HTTPS в отношении всех запросов, которые ваше приложение отправляет в конечную точку веб-служб Exchange. Это обеспечит защиту обмена данными между вашим приложением и сервером Exchange Server.
  
В Exchange можно выбрать следующие варианты проверки подлинности: 
  
- OAuth 2.0 (только для Exchange Online);
    
- NTLM (только для локальных версий Exchange);
    
- обычная проверка (больше не рекомендуется).
    
Выбор метода проверки подлинности зависит от требований вашей организации к обеспечению защиты, от того, используете ли вы Exchange Online или локальные версии Exchange, а также от того, есть ли у вас доступ к стороннему поставщику, который может выдавать маркеры OAuth. Эта статья поможет вам выбрать подходящий стандарт проверки подлинности для вашего приложения.
  
## <a name="oauth-authentication"></a>Проверка подлинности OAuth

Рекомендуем использовать стандарт OAuth для подключения к службам Exchange Online во всех новых приложениях. Более высокий уровень защиты по сравнению с тем, который обеспечивает обычная проверка подлинности, оправдывает дополнительные усилия по реализации стандарта OAuth в вашем приложении. Но у этого стандарта есть и некоторые недостатки, которые следует учитывать.
  
**Таблица 1. Преимущества и недостатки использования стандарта OAuth**

|**Преимущества**|**Недостатки**|
|:-----|:-----|
| OAuth — это протокол проверки подлинности, соответствующий отраслевым стандартам.<br/><br/>Проверку подлинности выполняет сторонний поставщик. Ваше приложение не должно собирать и хранить учетные данные Exchange.<br/><br/>Это облегчает вам задачу, так как ваше приложение получает только скрытый маркер от поставщика проверки подлинности. Это значит, что в случае бреши в системе безопасности вашего приложения откроется доступ только к данным маркера, а не учетным данным Exchange пользователя.  <br/> | OAuth требует использования стороннего поставщика проверки подлинности, поэтому возможны дополнительные расходы для вашей организации или клиентов.<br/><br/>Стандарт OAuth сложнее реализовать, чем обычную проверку подлинности.<br/><br/>Для его реализации необходимо интегрировать приложение с поставщиком проверки подлинности и сервером Exchange Server.  <br/> |
   
Чтобы свести к минимуму неудобства, воспользуйтесь [библиотекой проверки подлинности Microsoft Azure AD](https://docs.microsoft.com/ru-RU/azure/active-directory/develop/active-directory-authentication-libraries) (ADAL) для аутентификации пользователей в доменных службах Active Directory (AD DS) в облаке или локальной среде, а затем получите маркеры доступа для защиты вызовов сервера Exchange Server. Для Exchange Online требуются маркеры, выданные службой Azure Active Directory, которая поддерживается библиотекой ADAL. Но можно воспользоваться любой сторонней библиотекой. 
  
Дополнительные ресурсы, касающиеся использования стандарта проверки подлинности OAuth в приложении EWS:
  
- [пробная версия Office 365](https://docs.microsoft.com/ru-RU/office/developer-program/office-365-developer-program), позволяющая настроить сервер Exchange Server для тестирования клиентского приложения;
    
- [библиотека проверки подлинности Azure AD для .NET](https://docs.microsoft.com/ru-RU/azure/active-directory/develop/active-directory-authentication-libraries);
    
- [сведения о настройке Azure Active Directory](http://msdn.microsoft.com/library/055e1155-2d4d-4c85-b44e-d406872ba595%28Office.15%29.aspx), позволяющей приложению использовать маркеры OAuth для проверки подлинности;
    
- пример кода, доступный в статье [How to: Authenticate an EWS application by using OAuth](how-to-authenticate-an-ews-application-by-using-oauth.md). 
    
## <a name="ntlm-authentication"></a>Проверка подлинности NTLM

Проверка подлинности NTLM доступна только для локальных серверов Exchange. В случае приложений, запущенных в сети корпоративного брандмауэра, интеграция проверки подлинности NTLM и .NET Framework обеспечивает использование встроенных средств для проверки подлинности вашего приложения. 
  
**Таблица 2. Преимущества и недостатки использования протокола NTLM**

|**Преимущества**|**Недостатки**|
|:-----|:-----|
| Проверка подлинности для сервера Exchange Server выполняется сразу: дополнительные манипуляции не нужны. Доступ к службам Exchange Server можно настроить с помощью [командлета командной консоли Exchange](how-to-control-access-to-ews-in-exchange.md).  <br/><br/>Используется объект [CredentialCache](http://msdn2.microsoft.com/ru-RU/library/615e0wsd) .NET Framework для автоматического получения учетных данных пользователя.<br/><br/>[Доступны примеры кода](http://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c), обеспечивающие использование учетных данных вошедшего в систему пользователя для проверки подлинности на локальном сервере Exchange Server.  <br/> | Чтобы можно было использовать проверку подлинности на основе NTLM, пользователям нужно войти в домен.<br/><br/>Могут возникнуть трудности с получением доступа к учетным записям электронной почты, которые не связаны с учетной записью домена пользователя.<br/><br/>Для использования протокола NTLM у приложений служб должна быть учетная запись домена.  <br/> |
   
## <a name="basic-authentication"></a>Обычная проверка подлинности

Такая проверка обеспечивает базовый уровень защиты для клиентского приложения. Мы рекомендуем, чтобы все новые приложения использовали протоколы NTLM или OAuth для проверки подлинности. Но в некоторых случаях для вашего приложения подойдет именно обычная проверка подлинности.
  
**Таблица 3. Преимущества и недостатки использования обычной проверки подлинности**

|**Преимущества**|**Недостатки**|
|:-----|:-----|
| Проверка подлинности для сервера Exchange Server выполняется сразу: дополнительные манипуляции не нужны. Доступ к службам Exchange Server можно настроить с помощью [командлета командной консоли Exchange](how-to-control-access-to-ews-in-exchange.md).  <br/><br/>Приложения для Windows могут использовать учетные данные по умолчанию вошедшего в систему пользователя.<br/><br/>С помощью многих [доступных примеров кода](http://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c) можно понять, как обеспечить вызовы EWS с использованием обычной проверки подлинности.  <br/> | Требуется, чтобы ваше приложение собирало и хранило учетные данные пользователей.<br/><br/>Необходимо отключить проверку подлинности на основе NTLM для всех пользователей, для которых будет использоваться обычная проверка подлинности.<br/><br/>Если возникнет брешь системы безопасности приложения, злоумышленник может получить доступ к адресу и паролю электронной почты пользователя.  <br/> |
   
Необходимо убедиться в том, что обычная проверка подлинности соответствует требованиям вашей организации и клиентов к обеспечению защиты. Такая проверка подойдет, если вы хотите избежать выполнения многочисленных задач по настройке (например, в простых тестовых или демонстрационных приложениях).
  
## <a name="see-also"></a>См. также

- [Начало работы с веб-службами Exchange](start-using-web-services-in-exchange.md)   
- [Добавление адреса входа в веб-приложение с помощью Microsoft Azure AD](http://msdn.microsoft.com/library/055e1155-2d4d-4c85-b44e-d406872ba595%28Office.15%29.aspx)    
- [Контроль доступа к EWS в Exchange](how-to-control-access-to-ews-in-exchange.md)    
- [Управление доступом клиентских приложений к EWS в Exchange](controlling-client-application-access-to-ews-in-exchange.md)    
- [Поддерживаемые маркеры и типы утверждений](http://msdn.microsoft.com/library/9d35e4bc-7b72-49d1-b723-5464eee6be2c%28Office.15%29.aspx)
    

